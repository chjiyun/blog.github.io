<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ryan&#39;s blog</title>
  
  <subtitle>Can only sense happiness</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://me.chjiyun.com/"/>
  <updated>2020-01-01T10:08:53.085Z</updated>
  <id>https://me.chjiyun.com/</id>
  
  <author>
    <name>ryan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>centos7部署Node开发环境</title>
    <link href="https://me.chjiyun.com/2019/11/16/centos7%E9%83%A8%E7%BD%B2Node%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    <id>https://me.chjiyun.com/2019/11/16/centos7部署Node开发环境/</id>
    <published>2019-11-16T14:48:28.000Z</published>
    <updated>2020-01-01T10:08:53.085Z</updated>
    
    <content type="html"><![CDATA[<p>记录 Git + Node + Nginx + Mysql + Redis + Jenkins + SSH 安装流程</p><a id="more"></a><h1 id="git-安装"><a class="markdownIt-Anchor" href="#git-安装"></a> git 安装</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># root用户可省略sudo</span></span><br><span class="line">sudo yum install -y gcc-c++</span><br><span class="line">sudo yum install -y zlib-devel perl-ExtUtils-MakeMaker</span><br><span class="line"><span class="comment"># 去官网复制最新版本链接</span></span><br><span class="line"><span class="built_in">cd</span> /data  <span class="comment"># 软件包存放目录</span></span><br><span class="line">wget https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.0.tar.gz</span><br><span class="line">tar -zxvf git-2.9.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> git-2.9.0</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span></span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line">git --version</span><br></pre></td></tr></table></figure><h1 id="nodenvm"><a class="markdownIt-Anchor" href="#nodenvm"></a> Node(nvm)</h1><h2 id="安装nvm"><a class="markdownIt-Anchor" href="#安装nvm"></a> 安装nvm</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash</span><br></pre></td></tr></table></figure><p>输出如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">=&gt; Downloading nvm as script to <span class="string">'/root/.nvm'</span></span><br><span class="line"></span><br><span class="line">=&gt; Appending nvm <span class="built_in">source</span> string to /root/.bashrc</span><br><span class="line">=&gt; Appending bash_completion <span class="built_in">source</span> string to /root/.bashrc</span><br><span class="line">=&gt; Close and reopen your terminal to start using nvm or run the following to use it now:</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">"<span class="variable">$HOME</span>/.nvm"</span></span><br><span class="line">[ -s <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span> ] &amp;&amp; \. <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span>  <span class="comment"># This loads nvm</span></span><br><span class="line">[ -s <span class="string">"<span class="variable">$NVM_DIR</span>/bash_completion"</span> ] &amp;&amp; \. <span class="string">"<span class="variable">$NVM_DIR</span>/bash_completion"</span>  <span class="comment"># This loads nvm bash_completion</span></span><br></pre></td></tr></table></figure><p>指定 nvm 的镜像需要在环境配置中增加 NVM_NODEJS_ORG_MIRROR，在/root/.bashrc中增加以下内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node</span><br></pre></td></tr></table></figure><p>使环境变量生效，并验证环境变量是否生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /root/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$NVM_DIR</span></span><br><span class="line"><span class="comment"># 输出版本号说明nvm安装Ok</span></span><br><span class="line">nvm --version</span><br></pre></td></tr></table></figure><h2 id="安装nodejs"><a class="markdownIt-Anchor" href="#安装nodejs"></a> 安装nodejs</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看nodejs可用版本</span></span><br><span class="line">nvm ls-remote</span><br><span class="line"><span class="comment"># 安装指定版本</span></span><br><span class="line">nvm install v12.13.0</span><br><span class="line"><span class="comment"># 使用某个版本</span></span><br><span class="line">nvm use v12.13.0</span><br><span class="line"><span class="comment"># 查看已经安装的所有版本</span></span><br><span class="line">nvm ls</span><br></pre></td></tr></table></figure><h1 id="nginx"><a class="markdownIt-Anchor" href="#nginx"></a> Nginx</h1><h2 id="安装编译工具及库文件"><a class="markdownIt-Anchor" href="#安装编译工具及库文件"></a> 安装编译工具及库文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install make zlib zlib-devel gcc-c++ libtool  openssl openssl-devel</span><br></pre></td></tr></table></figure><h2 id="安装pcre"><a class="markdownIt-Anchor" href="#安装pcre"></a> 安装PCRE</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载最新版本的，注意不要用pcre2</span></span><br><span class="line"><span class="built_in">cd</span> /data</span><br><span class="line">wget https://jaist.dl.sourceforge.net/project/pcre/pcre/8.43/pcre-8.43.tar.gz</span><br><span class="line">tar -zxvf pcre-8.43.tar.gz</span><br><span class="line"><span class="built_in">cd</span> pcre-8.43 </span><br><span class="line"><span class="comment"># 安装编译</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment"># 查看pcre版本</span></span><br><span class="line">pcre-config --version</span><br><span class="line"><span class="comment"># 删除PCRE</span></span><br><span class="line">rpm -e --nodeps pcre</span><br></pre></td></tr></table></figure><h2 id="安装nignx"><a class="markdownIt-Anchor" href="#安装nignx"></a> 安装Nignx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载包</span></span><br><span class="line"><span class="built_in">cd</span> /data</span><br><span class="line">wget http://nginx.org/download/nginx-1.16.1.tar.gz</span><br><span class="line">tar -zxvf nginx-1.16.1.tar.gz</span><br><span class="line"><span class="built_in">cd</span> nginx-1.16.1</span><br><span class="line"><span class="comment"># 编译参数(后面的参数可不带，以默认参数安装)</span></span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/nginx --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --with-pcre=/data/pcre-8.43 </span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment"># nginx命令</span></span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx -V</span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx -t</span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx</span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx -s stop</span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx -s reload</span><br><span class="line"><span class="comment"># 添加到环境变量</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/nginx/sbin</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line">nginx -v</span><br></pre></td></tr></table></figure><blockquote><ol><li><p>–with-http_stub_status_module 可以用来启用Nginx的NginxStatus功能，以监控Nginx的当前状态。此模块的使用请自行谷歌，此模块不需要的用户可无需安装。</p></li><li><p>–with-http_gzip_static_module nginx默认安装ngx_http_gzip_module,采用的是chunked方式的动态压缩，静态压缩需要使用http_gzip_static_module这个模块，进行pre-compress。Nginx的动态压缩是对每个请求先压缩再输出，这样浪费了很多cpu资源，这个模块的作用是对于需要压缩的文件，直接读取已经压缩好的文件(文件名为加.gz)，而不是动态压缩。</p></li><li><p>–with-pcre=/data/pcre-8.43 记得填上自己机器上 pcre的解压缩路径</p></li><li><p>–with-http_ssl_module 启用 https</p></li></ol></blockquote><h1 id="mysql"><a class="markdownIt-Anchor" href="#mysql"></a> Mysql</h1><blockquote><p>CentOS7 一般yum安装包中有自带的mariadb，不过更多人更青睐mysql。</p></blockquote><h2 id="下载安装"><a class="markdownIt-Anchor" href="#下载安装"></a> 下载安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /data</span><br><span class="line">wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</span><br><span class="line">rpm -ivh mysql80-community-release-el7-3.noarch.rpm</span><br><span class="line"><span class="comment"># 查看yum源中的mysql安装包</span></span><br><span class="line">yum repolist all | grep mysql</span><br><span class="line"><span class="comment"># 安装完成后就会覆盖掉之前的mariadb</span></span><br><span class="line">yum install -y mysql-community-server</span><br></pre></td></tr></table></figure><h2 id="数据库设置"><a class="markdownIt-Anchor" href="#数据库设置"></a> 数据库设置</h2><p>注意：启动失败可能要装 mariadb-server</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动MySQL</span></span><br><span class="line">systemctl start mysqld</span><br><span class="line"><span class="comment"># 查看MySQL运行状态</span></span><br><span class="line">systemctl status mysqld</span><br><span class="line"><span class="comment"># 进入MySQL还得先找出此时root用户的密码，通过如下命令可以在日志文件中找出密码</span></span><br><span class="line">grep <span class="string">"password"</span> /var/<span class="built_in">log</span>/mysqld.log</span><br><span class="line"><span class="comment"># 进入数据库</span></span><br><span class="line">mysql -uroot -p</span><br><span class="line"><span class="comment"># 修改密码</span></span><br><span class="line">ALTER USER <span class="string">'root'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'new password'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：重点啊，如果你没有设置认证方式，默认的密码加密方式是：caching_sha2_password，而现在很多客户端工具还不支持这种加密认证方式，连接测试的时候就会报错：client does not support authentication protocol requested by server; consider upgrading MySQL client，这里的错误信息就是不支持身份认证方式，没关系，去/etc/my.cnf里面在[mysqld]下面加上这句话即可：</span></span><br><span class="line">default_authentication_plugin=mysql_native_password</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加3306端口</span></span><br><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line"><span class="comment"># 防火墙设置重载</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><h2 id="开启mysql的远程访问"><a class="markdownIt-Anchor" href="#开启mysql的远程访问"></a> 开启mysql的远程访问</h2><p>这里允许root用户远程的时候，可能会出现如下的错误</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启mysql的远程访问（如要开启所有的，用%代替IP）</span></span><br><span class="line">grant all privileges on *.* to <span class="string">'root'</span>@<span class="string">'%'</span> identified by <span class="string">'password'</span> with grant option;</span><br><span class="line">flush privileges;</span><br><span class="line"><span class="comment"># ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IDENTIFIED BY 'Chjiyun123456' WITH GRANT OPTION' at line 1</span></span><br></pre></td></tr></table></figure><p>非root用户，这里就要先去创建一个用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">CREATE USER <span class="string">'user1'</span>@<span class="string">'%'</span> IDENTIFIED BY <span class="string">'123456'</span>;</span><br><span class="line">grant all on *.* to <span class="string">'user1'</span>@<span class="string">'%'</span>;</span><br><span class="line"><span class="comment"># 注意:用以上命令授权的用户不能给其它用户授权,如果想让该用户可以授权,用以下命令: </span></span><br><span class="line"><span class="comment"># GRANT all ON databasename.tablename TO 'username'@'host' WITH GRANT OPTION; </span></span><br><span class="line">\q <span class="comment"># 退出 mysql</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 最后重启数据库，使配置生效</span></span><br><span class="line">systemctl restart mysqld</span><br><span class="line"><span class="comment"># 设置开机启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/qq_36582604/article/details/80526287" target="_blank" rel="noopener">安装Mysql及初始化</a><br><a href="https://www.jianshu.com/p/531cc35b15e7" target="_blank" rel="noopener">centos7下使用yum源安装mysql5.7记录</a></p><h1 id="redis"><a class="markdownIt-Anchor" href="#redis"></a> Redis</h1><p>去<a href="http://download.redis.io/releases/" target="_blank" rel="noopener">官网</a>可以查看最新的releases版本</p><h2 id="下载安装-2"><a class="markdownIt-Anchor" href="#下载安装-2"></a> 下载安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定目录下下载安装包</span></span><br><span class="line">wget http://download.redis.io/releases/redis-stable.tar.gz</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar -zxvf redis-stable.tar.gz</span><br><span class="line"><span class="comment"># 安装gcc依赖</span></span><br><span class="line">yum install gcc -y</span><br><span class="line"><span class="comment"># 编译安装</span></span><br><span class="line">make MALLOC=libc</span><br><span class="line"><span class="comment"># 进入src目录继续安装</span></span><br><span class="line"><span class="built_in">cd</span> src</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h2 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 放行 6379 端口</span></span><br><span class="line">firewall-cmd --zone=public --add-port=6379/tcp --permanent</span><br><span class="line"><span class="comment"># 重载配置</span></span><br><span class="line">firewall-cmd --reload</span><br><span class="line"><span class="comment"># redis-stable根目录修改配置文件</span></span><br><span class="line">vim redis.conf</span><br><span class="line"><span class="comment"># 将daemonize no 改为 yes，开启守护进程</span></span><br><span class="line">daemonize yes</span><br><span class="line"><span class="comment"># 设置redis远程连接，注释bind 127.0.0.1</span></span><br><span class="line"><span class="comment"># bind 127.0.0.1</span></span><br><span class="line"><span class="comment"># 搜索 requirepass 这一行，设置密码</span></span><br><span class="line">requirepass <span class="string">"****"</span></span><br><span class="line"><span class="comment"># 在/etc目录下新建redis目录</span></span><br><span class="line">mkdir -p /etc/redis</span><br><span class="line"><span class="comment"># 将/redis-stable/redis.conf 文件复制一份到/etc/redis目录下，并命名为6379.conf</span></span><br><span class="line">cp redis.conf /etc/redis/6379.conf</span><br><span class="line"><span class="comment"># 将redis的启动脚本复制一份放到/etc/init.d目录下</span></span><br><span class="line">cp redis_init_script /etc/init.d/redisd</span><br><span class="line"><span class="comment"># 设置redis开机自启动</span></span><br><span class="line">chkconfig redisd on</span><br><span class="line"><span class="comment"># 修改redis启动脚本</span></span><br><span class="line">vim /etc/init.d/redisd</span><br><span class="line"><span class="comment"># 修改如下脚本，添加密码</span></span><br><span class="line"><span class="comment"># $CLIEXEC -p $REDISPORT shutdown</span></span><br><span class="line"><span class="variable">$CLIEXEC</span> -a <span class="string">"newpwd"</span> -p <span class="variable">$REDISPORT</span> shutdown</span><br><span class="line"><span class="comment"># 启动以及关闭redis</span></span><br><span class="line">service redisd start</span><br><span class="line">service redisd stop</span><br></pre></td></tr></table></figure><h1 id="jenkins"><a class="markdownIt-Anchor" href="#jenkins"></a> Jenkins</h1><blockquote><p>Jenkins是一个开源软件项目，是基于Java开发的一种持续集成工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。Jenkins是开源CI&amp;CD软件领导者，提供超过1000个插件来支持构建、部署、自动化，满足任何项目的需要。</p></blockquote><h2 id="安装jenkins"><a class="markdownIt-Anchor" href="#安装jenkins"></a> 安装jenkins</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y java</span><br><span class="line">wget -O /etc/yum.repos.d/jenkins.repo http://jenkins-ci.org/redhat/jenkins.repo</span><br><span class="line">rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key</span><br><span class="line">yum install -y jenkins</span><br></pre></td></tr></table></figure><p>注意：</p><ol><li><p>Jenkins 的安装目录是：/var/lib/jenkins/</p></li><li><p>Jenkins 的配置文件地址：/etc/sysconfig/jenkins</p></li><li><p>工作目录：JENKINS_HOME</p></li><li><p>jenkins的用户：JENKINS_USER</p></li><li><p>端口：JENKINS_PORT，JENKINS_PORT是Jenkins的端口，默认端口是8080，为了和别的系统占用端口冲突，建议改变。</p></li></ol><p>有时候Jenkins需要操作别的用户的文件或者执行脚本，那么就得有对应的权限，比如Jenkins用户执行docker命令进行镜像制作与上传，用如下的命令即可。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G docker jenkins</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> jenkins <span class="comment"># 开机启动</span></span><br><span class="line">systemctl start jenkins <span class="comment"># 启动jenkins</span></span><br><span class="line">systemctl is-enabled jenkins  <span class="comment"># 查看服务是否开机启动</span></span><br><span class="line">systemctl stop jenkins  <span class="comment"># 停止服务</span></span><br></pre></td></tr></table></figure><h2 id="github配置"><a class="markdownIt-Anchor" href="#github配置"></a> github配置</h2><p>去 github 项目的主页面，点击 settings -&gt; Webhooks，设置如下：</p><p><img src="https://i.loli.net/2019/11/16/ClVWuBNcKEGTb2I.png" alt="19_11_16_01.png" title="webhook"></p><h2 id="系统设置"><a class="markdownIt-Anchor" href="#系统设置"></a> 系统设置</h2><p>主要配置 Jenkins Location 和 Publish over SSH</p><p>Jenkins URL： <a href="http://IP:8090/" target="_blank" rel="noopener">http://IP:8090/</a></p><p>Jenkins SSH Key:<br>生成密钥对，位置一般在 /root/.ssh，私钥粘贴在 key 框框内，再配置 SSH Servers</p><p><img src="https://i.loli.net/2019/11/16/ngN2r6KWAHeMc4o.png" alt="19_11_16_02.png" title="SSH Servers"></p><p>点 Test Configuration 可测试 ssh key 是否连接成功</p><h2 id="凭据"><a class="markdownIt-Anchor" href="#凭据"></a> 凭据</h2><p>github ssh 配置，公钥放在 github，这里粘贴私钥</p><p><img src="https://i.loli.net/2019/11/16/ysFeE2virKJ9NMD.png" alt="19_11_16_03.png" title="Credential "></p><p>token配置</p><p><img src="https://i.loli.net/2019/11/16/ORjHX4wE2TJP3hy.png" alt="19_11_16_10.png" title="token"></p><h2 id="新建任务"><a class="markdownIt-Anchor" href="#新建任务"></a> 新建任务</h2><p>如果项目已配置过项目，可以填写项目名到复制按钮上面的框框，可以复用原有项目的配置</p><p><img src="https://i.loli.net/2019/11/16/beQEjcIn6phamgF.png" alt="19_11_16_04.png"></p><h2 id="构建配置"><a class="markdownIt-Anchor" href="#构建配置"></a> 构建配置</h2><p><img src="https://i.loli.net/2019/11/16/VjOecN3nvAx6lpf.png" alt="19_11_16_05.png" title="GitHub 项目"><br><img src="https://i.loli.net/2019/11/16/uL8q4UlZJiVwps5.png" alt="19_11_16_06.png" title="源码管理"><br><img src="https://i.loli.net/2019/11/16/3ltANqE1KzaPxjm.png" alt="19_11_16_07.png" title="构建触发器"><br><img src="https://i.loli.net/2019/11/16/ShbVurz5ldFysZK.png" alt="19_11_16_08.png" title="构建环境"><br><img src="https://i.loli.net/2019/11/16/VwoqpM8xkiWYadE.png" alt="19_11_16_09.png" title="SSH Publishers"></p><p>更新源码到 github，jenkins 能自动构建就代表配置成功！</p><h1 id="环境变量"><a class="markdownIt-Anchor" href="#环境变量"></a> 环境变量</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 永久生效</span></span><br><span class="line">/etc/profile</span><br><span class="line"><span class="comment"># 也是永久，单独设置再一个文件，易维护</span></span><br><span class="line">/etc/profile.d</span><br></pre></td></tr></table></figure><h1 id="ssh密钥管理"><a class="markdownIt-Anchor" href="#ssh密钥管理"></a> ssh密钥管理</h1><blockquote><p>SSH是一个专为远程登录会话和其他网络服务提供安全性的协议。默认状态下SSH链接是需要密码认证的，可以通过添加系统认证（即公钥-私钥）的修改，达到免密登录。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># “-t rsa” 指定生成算法。</span></span><br><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><h1 id="vim"><a class="markdownIt-Anchor" href="#vim"></a> vim</h1><p>修改缩进</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示行数</span></span><br><span class="line"><span class="built_in">set</span> number</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> tabstop=4</span><br><span class="line"><span class="built_in">set</span> softtabstop=4</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4</span><br><span class="line"><span class="comment"># set autoindent</span></span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/CaspianSea/article/details/78787736" target="_blank" rel="noopener">Vim 复制粘帖格式错乱问题的解决办法</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;记录 Git + Node + Nginx + Mysql + Redis + Jenkins + SSH 安装流程&lt;/p&gt;
    
    </summary>
    
      <category term="运维" scheme="https://me.chjiyun.com/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
      <category term="centos" scheme="https://me.chjiyun.com/tags/centos/"/>
    
      <category term="部署" scheme="https://me.chjiyun.com/tags/%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>利用canvas拼接图片并导出或上传</title>
    <link href="https://me.chjiyun.com/2019/08/24/%E5%88%A9%E7%94%A8canvas%E6%8B%BC%E6%8E%A5%E5%9B%BE%E7%89%87%E5%B9%B6%E5%AF%BC%E5%87%BA%E6%88%96%E4%B8%8A%E4%BC%A0/"/>
    <id>https://me.chjiyun.com/2019/08/24/利用canvas拼接图片并导出或上传/</id>
    <published>2019-08-23T16:54:11.000Z</published>
    <updated>2019-08-23T17:58:08.177Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/08/24/kItZT3Czq1sbJiQ.png" alt="image.png"></p><a id="more"></a><h2 id="生成jpg"><a class="markdownIt-Anchor" href="#生成jpg"></a> 生成jpg</h2><p>不使用 png 是因为背景透明，导出效果不太好，canvas 转换成 jpeg 之前会移除alpha通道，所以透明区域被填充成了黑色</p><h3 id="todataurl"><a class="markdownIt-Anchor" href="#todataurl"></a> toDataURL</h3><blockquote><p>canvas.toDataURL(type, encoderOptions);<br>type: 图片格式，默认为 image/png<br>encoderOptions: 在指定图片格式为 image/jpeg 或 image/webp的情况下，可以从 0 到 1 的区间内选择图片的质量。如果超出取值范围，将会使用默认值 0.92。其他参数会被忽略。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  合并多张图片生成 一张 jpg 图片</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; charts 一维数组</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; outCanvasId 隐藏于视线之外 canvas的 id</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; direction vertical | horizontal 按方向拼接图片</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getChartImage</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  charts,</span></span></span><br><span class="line"><span class="function"><span class="params">  outCanvasId,</span></span></span><br><span class="line"><span class="function"><span class="params">  drawHorizontal = false</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(charts) || charts.length === <span class="number">0</span> || !outCanvasId) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> arr = charts.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">"toDataURL"</span> <span class="keyword">in</span> item) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        base64Str: item.toDataURL(<span class="string">"image/jpeg"</span>),</span><br><span class="line">        width: item.width,</span><br><span class="line">        height: item.height,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> offsetY = <span class="number">30</span>; <span class="comment">// 每张图片的相互间隔距离</span></span><br><span class="line">  <span class="keyword">const</span> offsetX = <span class="number">20</span>; <span class="comment">// 横向图片排布时的间隔距离</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> width = drawHorizontal</span><br><span class="line">    ? arr.reduce(<span class="function">(<span class="params">res, cur</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res + cur.width;</span><br><span class="line">      &#125;, (arr.length - <span class="number">1</span>) * offsetX)</span><br><span class="line">    : <span class="built_in">Math</span>.max(...arr.map(<span class="function"><span class="params">v</span> =&gt;</span> v.width));</span><br><span class="line">  <span class="keyword">const</span> height = drawHorizontal</span><br><span class="line">    ? <span class="built_in">Math</span>.max(...arr.map(<span class="function"><span class="params">v</span> =&gt;</span> v.height))</span><br><span class="line">    : arr.reduce(<span class="function">(<span class="params">res, cur</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res + cur.height;</span><br><span class="line">      &#125;, (arr.length - <span class="number">1</span>) * offsetY);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 异步代码这里要阻塞执行</span></span><br><span class="line">  <span class="keyword">const</span> imgs = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(</span><br><span class="line">    arr.map(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">        img.src = v.base64Str;</span><br><span class="line">        img.addEventListener(<span class="string">"load"</span>, () =&gt; &#123;</span><br><span class="line">          res(img);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> canvas = <span class="built_in">document</span>.getElementById(outCanvasId);</span><br><span class="line">  <span class="keyword">const</span> context = canvas.getContext(<span class="string">"2d"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// context.clearRect(0, 0, width, height); // 宽高被重设时会自动清空画布</span></span><br><span class="line">  canvas.width = width;</span><br><span class="line">  canvas.height = height;</span><br><span class="line"></span><br><span class="line">  context.fillStyle = <span class="string">"#fff"</span>;</span><br><span class="line">  context.fillRect(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">  imgs.forEach(<span class="function">(<span class="params">img, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> idx = index &amp;&amp; index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (drawHorizontal) &#123;</span><br><span class="line">      context.drawImage(img, index * (imgs[idx].width + offsetX), <span class="number">0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      context.drawImage(img, <span class="number">0</span>, index * (imgs[idx].height + offsetY));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// toBlob(callback,"image/jpeg") 此方法时异步的</span></span><br><span class="line">  <span class="keyword">const</span> newBase64 = canvas.toDataURL(<span class="string">"image/jpeg"</span>, <span class="number">0.9</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    base64Str: newBase64,</span><br><span class="line">    width,</span><br><span class="line">    height,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以多次调用自己 以达到横向或竖向拼接图片的目的</p><blockquote><p>注意：不考虑兼容性的情况下可直接使用toBlob转二进制数据传给后端，少写下面一部分代码</p></blockquote><h2 id="fetch上传"><a class="markdownIt-Anchor" href="#fetch上传"></a> fetch上传</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">uploadImage</span>(<span class="params">base64String, fileName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 下面将要把 base64 转换成formdata</span></span><br><span class="line">    <span class="comment">// 这里对base64串进行操作，去掉url头，并转换为byte</span></span><br><span class="line">    <span class="keyword">const</span> bytes = <span class="built_in">window</span>.atob(base64String.split(<span class="string">","</span>)[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">const</span> arr = [];</span><br><span class="line">    <span class="keyword">const</span> bytesLength = bytes.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bytesLength; i += <span class="number">1</span>) &#123;</span><br><span class="line">      arr.push(bytes.charCodeAt(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> blob = <span class="keyword">new</span> Blob([<span class="keyword">new</span> <span class="built_in">Uint8Array</span>(arr)], &#123; <span class="attr">type</span>: <span class="string">"image/jpeg"</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">    <span class="comment">// 后端接收二进制数据</span></span><br><span class="line">    formData.append(<span class="string">"file"</span>, blob, <span class="string">`<span class="subst">$&#123;fileName&#125;</span>.jpg`</span>);</span><br><span class="line">    fetch(<span class="string">"http://localhost/xxxx"</span>,&#123;</span><br><span class="line">        method:<span class="string">"POST"</span>,</span><br><span class="line">        body:formdata</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (res.code === <span class="number">0</span>) &#123;</span><br><span class="line">        resolve(res.data.file_id);</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可参考</p><ul><li><a href="https://blog.csdn.net/z469590925/article/details/78830167" target="_blank" rel="noopener">canvas转base64/jpeg时，透明区域变成黑色背景的解决方案</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/08/24/kItZT3Czq1sbJiQ.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="canvas" scheme="https://me.chjiyun.com/categories/canvas/"/>
    
    
      <category term="canvas" scheme="https://me.chjiyun.com/tags/canvas/"/>
    
  </entry>
  
  <entry>
    <title>Interactive-Bubble-Chart</title>
    <link href="https://me.chjiyun.com/2018/04/15/Interactive-Bubble-Chart/"/>
    <id>https://me.chjiyun.com/2018/04/15/Interactive-Bubble-Chart/</id>
    <published>2018-04-15T04:44:26.000Z</published>
    <updated>2018-04-15T07:03:53.707Z</updated>
    
    <content type="html"><![CDATA[<p>Circle Pack and Force Layout</p><p><img src="https://i.loli.net/2018/04/15/5ad2ebae43297.png" alt="18_4_15_01.png"></p><a id="more"></a><h2 id="demo"><a class="markdownIt-Anchor" href="#demo"></a> Demo</h2><p>Click here: <a href="http://www.chjiyun.com/blog-demo/2018/4-15-01.html" target="_blank" rel="noopener">Demo</a></p><h2 id="code"><a class="markdownIt-Anchor" href="#code"></a> Code</h2><p>HTML</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"bubble-word"</span> <span class="attr">class</span>=<span class="string">"bubble-word"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSS</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bubble-word</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bubble-word</span> &gt; <span class="selector-tag">svg</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bubble-word</span> <span class="selector-class">.bubble</span> <span class="selector-tag">text</span>&#123;</span><br><span class="line">    <span class="attribute">text-anchor</span>: middle;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JS运行环境：IE10+ 、d3.js (v4.13)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> svg,</span><br><span class="line">    pack,</span><br><span class="line">    bubble,</span><br><span class="line">    simulation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> width = <span class="built_in">document</span>.body.clientWidth;</span><br><span class="line"><span class="keyword">const</span> height = <span class="built_in">document</span>.body.clientHeight;</span><br><span class="line"><span class="keyword">const</span> centerX = width * <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">const</span> centerY = height * <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">const</span> scaleColor = d3.scaleOrdinal(d3.schemeCategory20);</span><br><span class="line"><span class="keyword">let</span> forceCollide = d3.forceCollide(<span class="function"><span class="params">d</span> =&gt;</span> d.r + <span class="number">1</span>); <span class="comment">// create a circle collision force.</span></span><br><span class="line"></span><br><span class="line">getData();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    svg = d3.select(<span class="string">"#bubble-word"</span>)</span><br><span class="line">        .append(<span class="string">'svg'</span>)</span><br><span class="line">        .attr(<span class="string">"xmlns"</span>, <span class="string">"http://www.w3.org/2000/svg"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use pack to calculate radius of the circle</span></span><br><span class="line">    pack = d3.pack()</span><br><span class="line">        .size([width, height])</span><br><span class="line">        .padding(<span class="number">1.5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @v4 strength to apply to the position forces</span></span><br><span class="line">    <span class="keyword">const</span> forceStrength = <span class="number">0.05</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @v4 We create a force simulation now and add forces to it.</span></span><br><span class="line">    <span class="comment">// velocityDecay: 默认为 0.4，衰减系数类似于阻力。</span></span><br><span class="line">    <span class="comment">// 较低的衰减系数可以使得迭代次数更多，其布局结果也会更理性，但是可能会引起数值不稳定从而导致震荡</span></span><br><span class="line">    simulation = d3.forceSimulation()</span><br><span class="line">        <span class="comment">// .velocityDecay(0.3)</span></span><br><span class="line">        .force(<span class="string">"x"</span>, d3.forceX(centerX).strength(forceStrength))</span><br><span class="line">        .force(<span class="string">"y"</span>, d3.forceY(centerY).strength(forceStrength))</span><br><span class="line">        .force(<span class="string">"charge"</span>, d3.forceManyBody())<span class="comment">//-Math.pow(d.radius, 2.0) * forceStrength)</span></span><br><span class="line">        .force(<span class="string">"collide"</span>, forceCollide);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @v4 Force starts up automatically,</span></span><br><span class="line">    <span class="comment">//  which we don't want as there aren't any nodes yet.</span></span><br><span class="line">    <span class="comment">// simulation.stop();</span></span><br><span class="line"></span><br><span class="line">    draw(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @method createNodes 创建节点</span></span><br><span class="line"><span class="comment"> * @param &#123;Object&#125; source</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createNodes</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> root = d3.hierarchy(&#123; <span class="attr">children</span>: source &#125;)</span><br><span class="line">        .sum(<span class="function"><span class="params">d</span> =&gt;</span> d.value);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> rootData = pack(root).leaves().map(<span class="function">(<span class="params">d, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> data = d.data;</span><br><span class="line">        <span class="keyword">const</span> color = scaleColor(data.name);</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            x: centerX + (d.x - centerX) * <span class="number">3</span>,</span><br><span class="line">            y: centerY + (d.y - centerY) * <span class="number">3</span>,</span><br><span class="line">            id: <span class="string">"bubble"</span> + i,</span><br><span class="line">            r: <span class="number">0</span>,</span><br><span class="line">            radius: d.r,</span><br><span class="line">            value: data.value,</span><br><span class="line">            name: data.name,</span><br><span class="line">            color: color,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sort them to prevent occlusion of smaller nodes.</span></span><br><span class="line">    rootData.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b.value - a.value);</span><br><span class="line">    <span class="keyword">return</span> rootData;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @method draw 绘制bubble，动画初始化</span></span><br><span class="line"><span class="comment"> * @param &#123;Object&#125; data</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> nodes = createNodes(data);</span><br><span class="line">    <span class="built_in">console</span>.log(nodes);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @v4 Once we set the nodes, the simulation will start running automatically!</span></span><br><span class="line">    simulation.nodes(nodes).on(<span class="string">"tick"</span>, ticked);</span><br><span class="line"></span><br><span class="line">    bubble = svg.selectAll(<span class="string">".bubble"</span>)</span><br><span class="line">        .data(nodes)</span><br><span class="line">        .enter().append(<span class="string">"g"</span>)</span><br><span class="line">        .attr(<span class="string">"class"</span>, <span class="string">"bubble"</span>)</span><br><span class="line">        .call(d3.drag()</span><br><span class="line">            .on(<span class="string">"start"</span>, (d) =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (!d3.event.active) &#123; simulation.alphaTarget(<span class="number">0.2</span>).restart(); &#125;</span><br><span class="line">                d.fx = d.x;</span><br><span class="line">                d.fy = d.y;</span><br><span class="line">            &#125;)</span><br><span class="line">            .on(<span class="string">"drag"</span>, (d) =&gt; &#123;</span><br><span class="line">                d.fx = d3.event.x;</span><br><span class="line">                d.fy = d3.event.y;</span><br><span class="line">            &#125;)</span><br><span class="line">            .on(<span class="string">"end"</span>, (d) =&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (!d3.event.active) &#123; simulation.alphaTarget(<span class="number">0</span>); &#125;</span><br><span class="line">                d.fx = <span class="literal">null</span>;</span><br><span class="line">                d.fy = <span class="literal">null</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">// .on("mouseover", d =&gt; &#123;</span></span><br><span class="line">        <span class="comment">//  d3.select("#"+d.id).attr("fill", d3.color(d.color).brighter());</span></span><br><span class="line">        <span class="comment">// &#125;).on("mouseout", d =&gt; &#123;</span></span><br><span class="line">        <span class="comment">//  d3.select("#"+d.id).attr("fill", d.color);</span></span><br><span class="line">        <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> href = bubble.append(<span class="string">"a"</span>)</span><br><span class="line">        .attr(<span class="string">"href"</span>, d =&gt; <span class="string">"http://me.chjiyun.com/#"</span>+d.name)</span><br><span class="line">        .attr(<span class="string">"target"</span>, <span class="string">"_blank"</span>);</span><br><span class="line"></span><br><span class="line">    href.append(<span class="string">"circle"</span>)</span><br><span class="line">        .attr(<span class="string">"id"</span>, d =&gt; d.id)</span><br><span class="line">        .attr(<span class="string">"r"</span>, <span class="number">1e-6</span>)</span><br><span class="line">        .attr(<span class="string">"fill"</span>, d =&gt; d.color)</span><br><span class="line">        .transition().duration(<span class="number">2000</span>).ease(d3.easeElasticOut)</span><br><span class="line">        .tween(<span class="string">"circleIn"</span>, d =&gt; &#123;</span><br><span class="line">            <span class="keyword">let</span> i = d3.interpolateNumber(<span class="number">0</span>, d.radius);</span><br><span class="line">            <span class="keyword">return</span> <span class="function">(<span class="params">t</span>) =&gt;</span> &#123;</span><br><span class="line">                d.r = i(t);</span><br><span class="line">                simulation.force(<span class="string">"collide"</span>, forceCollide);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    href.append(<span class="string">"text"</span>)</span><br><span class="line">        .attr(<span class="string">"dy"</span>, d =&gt; <span class="string">"0.35em"</span>)</span><br><span class="line">        .text(<span class="function"><span class="params">d</span> =&gt;</span> d.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    d3.json(<span class="string">"/data/bubble.json"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line"></span><br><span class="line">        init(data.data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ticked</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    bubble.attr(<span class="string">"transform"</span>, d =&gt; <span class="string">`translate(<span class="subst">$&#123;d.x&#125;</span>,<span class="subst">$&#123;d.y&#125;</span>)`</span>)</span><br><span class="line">        .select(<span class="string">"circle"</span>)</span><br><span class="line">        .attr(<span class="string">"r"</span>, d =&gt; d.r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意：低版本浏览器无法解析此代码，需转译成es5运行</p><p>bubble.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"data"</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Lily"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">1</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Shane"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">2</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Sunshine"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">8</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Moon"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">10</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Meton"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">6</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Huton"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">12</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Ryan"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">4</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Ryan"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">4</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Cyan"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">5</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Huston"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="number">3</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参考：<br><a href="https://naustud.io/tech-stack/" target="_blank" rel="noopener">Bubble Chart</a><br><a href="http://bl.ocks.org/mbostock/4063269" target="_blank" rel="noopener">Interactive bubble chart combining Circle Pack and Force Layout</a><br><a href="http://bl.ocks.org/mbostock/4062045" target="_blank" rel="noopener">Force-Directed Graph</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Circle Pack and Force Layout&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2018/04/15/5ad2ebae43297.png&quot; alt=&quot;18_4_15_01.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="D3.js" scheme="https://me.chjiyun.com/categories/D3-js/"/>
    
    
      <category term="D3.js" scheme="https://me.chjiyun.com/tags/D3-js/"/>
    
  </entry>
  
  <entry>
    <title>CSS旋转头像特效</title>
    <link href="https://me.chjiyun.com/2018/03/25/CSS%E6%97%8B%E8%BD%AC%E5%A4%B4%E5%83%8F%E7%89%B9%E6%95%88/"/>
    <id>https://me.chjiyun.com/2018/03/25/CSS旋转头像特效/</id>
    <published>2018-03-25T11:24:23.000Z</published>
    <updated>2018-03-26T15:26:39.580Z</updated>
    
    <content type="html"><![CDATA[<p>发一篇一年前乱写的CSS代码，纯CSS3做的旋转特效，比较简单，看一遍基本就会了。</p><a id="more"></a><section class="blog-demo" style="padding-bottom:60%"><iframe src="//www.chjiyun.com/blog-demo/2018/3-25-01.html" name="blog-demo" width="100%" height="100%" frameborder="0"></iframe></section><h2 id="解读"><a class="markdownIt-Anchor" href="#解读"></a> 解读</h2><p>做这种旋转的关键是弄清楚CSS的元素层级概念，浏览器渲染元素是有规则的，如果有多个兄弟元素被绝对定位，那么后面的元素<code>z-index</code>就比前面的高，<code>backface-visibility</code>也是必须要掌握的，这个属性用的不多，往往在3D场景中才用到，作用是定义当元素不面向屏幕时是否可见，如果在旋转元素时不希望看到其背面，该属性很有用。</p><h2 id="css"><a class="markdownIt-Anchor" href="#css"></a> CSS</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%,-50%);</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(237, 209, 196, 0.6);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-flow</span>: row nowrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &gt; <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &gt; <span class="selector-tag">li</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &gt; <span class="selector-tag">li</span> <span class="selector-class">.front</span>,</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> &gt; <span class="selector-tag">li</span> <span class="selector-class">.back</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">3px</span> <span class="number">#5ddea9</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">10px</span> <span class="number">#999</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">400ms</span> ease-in;</span><br><span class="line">    <span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">    <span class="attribute">-webkit-backface-visibility</span>: hidden;</span><br><span class="line">    <span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">    <span class="comment">/* 定义当元素不面向屏幕时不可见 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-class">.front</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(0deg);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-class">.back</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(180deg);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-class">.cover</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* 不需设置z-index，后面的元素默认层级比前面的高 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: .<span class="number">65</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-class">.stars-info</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">114px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">114px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">22px</span>;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">45px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 转到背面,并调整元素层级 */</span></span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.front</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(180deg);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 转到正面,并调整元素层级 */</span></span><br><span class="line"><span class="selector-class">.rotate-img-list</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.back</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(0deg);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="html"><a class="markdownIt-Anchor" href="#html"></a> HTML</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"rotate-img-list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"front"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/t1.png"</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"back"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/t1.png"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cover"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stars-info"</span>&gt;</span></span><br><span class="line">                    Backface</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"front"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/t2.png"</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"back"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/t2.png"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cover"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stars-info"</span>&gt;</span></span><br><span class="line">                    Backface</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"front"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/t3.jpg"</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"back"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/t3.jpg"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cover"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stars-info"</span>&gt;</span></span><br><span class="line">                    Backface</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;发一篇一年前乱写的CSS代码，纯CSS3做的旋转特效，比较简单，看一遍基本就会了。&lt;/p&gt;
    
    </summary>
    
      <category term="CSS" scheme="https://me.chjiyun.com/categories/CSS/"/>
    
    
      <category term="CSS" scheme="https://me.chjiyun.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>D3.js绘制可交互的树状图</title>
    <link href="https://me.chjiyun.com/2018/03/17/D3-js%E7%BB%98%E5%88%B6%E5%8F%AF%E4%BA%A4%E4%BA%92%E7%9A%84%E6%A0%91%E7%8A%B6%E5%9B%BE/"/>
    <id>https://me.chjiyun.com/2018/03/17/D3-js绘制可交互的树状图/</id>
    <published>2018-03-17T12:19:18.000Z</published>
    <updated>2018-03-26T15:14:52.093Z</updated>
    
    <content type="html"><![CDATA[<p>D3 是 Data-Driven Documents 的简称，意思是数据驱动的文档，他本质上是一个 JavaScript 函数库。D3.js 的原理 是使用HTML, SVG, CSS 来表现数据，用户将数据绑定到DOM，然后根据数据来操作文档，创建可交互的图形。</p><p><img src="https://i.loli.net/2018/03/17/5aaceb771d774.png" alt="18_3_17_01.png"></p><a id="more"></a><h2 id="d3的优缺点"><a class="markdownIt-Anchor" href="#d3的优缺点"></a> D3的优缺点</h2><p><strong>优点：</strong></p><ol><li>灵活，代码简洁，功能丰富</li><li>支持数据绑定到DOM，能直接操作DOM</li><li>布局layout丰富</li><li>配色好看，能激发创造的热情</li><li>基于SVG，缩放不会损失精度</li><li>快，基于数据的高校文档操作，性能良好</li><li>社区活跃，庞大的用户群</li></ol><p><strong>缺点：</strong></p><ol><li>上手较难，需要花一定的功夫</li><li>在大量数据面前性能不如Canvas，因为DOM操作会触发浏览器重排和重绘</li><li>兼容性较差，IE9以下不支持SVG</li></ol><p>下面我将以例子的方式来讲解如何绘制两种树状图，以及如何绑定数据到 DOM，改变数据让DOM动起来，并且添加鼠标交互的效果，以下代码基于最新版 <a href="https://d3js.org/d3.v4.min.js" target="_blank" rel="noopener">d3.js（v4.13）</a></p><h2 id="radial-tidy-tree"><a class="markdownIt-Anchor" href="#radial-tidy-tree"></a> Radial Tidy Tree</h2><p><img src="https://i.loli.net/2018/03/17/5aaceb7700607.png" alt="18_3_17_03.png"></p><p>这种树状图结构层次清晰，父与子在不同半径的位置上，这样的关系会让人一目了然，用户无需操作 DOM 就可以得到可交互式的图表，这得益于 D3 功能丰富且强大API。</p><h3 id="html"><a class="markdownIt-Anchor" href="#html"></a> HTML</h3><p>svg的容器大小视情况而定，但必须设置。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"tree"</span> <span class="attr">class</span>=<span class="string">"tree"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="javascript"><a class="markdownIt-Anchor" href="#javascript"></a> javascript</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tree, <span class="comment">// d3 树状图对象</span></span><br><span class="line">    rootData, <span class="comment">// 根节点</span></span><br><span class="line">    container, <span class="comment">// g所有svg元素的容器</span></span><br><span class="line">    linkContainer, <span class="comment">// link的容器</span></span><br><span class="line">    nodeIndex = <span class="number">0</span>; <span class="comment">// 加id 用</span></span><br><span class="line"></span><br><span class="line">draw();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">oElement, sName</span>) </span>&#123; <span class="comment">// 兼容火狐和IE</span></span><br><span class="line">        <span class="keyword">return</span> oElement.currentStyle ? oElement.currentStyle[sName] : <span class="built_in">window</span>.getComputedStyle(oElement, <span class="literal">null</span>)[sName];  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tree = d3.tree()</span><br><span class="line">        .size([<span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="number">600</span>])</span><br><span class="line">        .separation(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123; <span class="keyword">return</span> (a.parent === b.parent ? <span class="number">1</span> : <span class="number">2</span>) / a.depth &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> con = d3.select(<span class="string">"#tree"</span>),</span><br><span class="line">        width = <span class="built_in">parseInt</span>(getStyle(con._groups[<span class="number">0</span>][<span class="number">0</span>], <span class="string">"width"</span>), <span class="number">10</span>),</span><br><span class="line">        height = <span class="built_in">parseInt</span>(getStyle(con._groups[<span class="number">0</span>][<span class="number">0</span>], <span class="string">"height"</span>), <span class="number">10</span>),</span><br><span class="line">        svg = con.append(<span class="string">"svg"</span>)</span><br><span class="line">            .attr(<span class="string">"xmlns"</span>, <span class="string">"http://www.w3.org/2000/svg"</span>)</span><br><span class="line">            .attr(<span class="string">"width"</span>, width)</span><br><span class="line">            .attr(<span class="string">"height"</span>, height);</span><br><span class="line"></span><br><span class="line">    container = svg.append(<span class="string">"g"</span>);</span><br><span class="line">    linkContainer = container.append(<span class="string">"g"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注意：火狐浏览器的缩放程度是chrome的3倍</span></span><br><span class="line">    <span class="keyword">var</span> zoom = d3.zoom()</span><br><span class="line">        .scaleExtent([<span class="number">0.4</span>, <span class="number">2</span>])</span><br><span class="line">        .on(<span class="string">"zoom"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// v4: 原来的translate和scale值现在都在 event.transform 中</span></span><br><span class="line">            <span class="comment">// d3.event.transform 等价于 </span></span><br><span class="line">            <span class="comment">// "translate(" + d3.event.transform.x + "," + d3.event.transform.y ")scale(" + d3.event.transform.k + ")"</span></span><br><span class="line">            container.attr(<span class="string">"transform"</span>, d3.event.transform);</span><br><span class="line">        &#125;);</span><br><span class="line">    svg.call(zoom);</span><br><span class="line">    <span class="comment">// 初始化g标签的位置（居中）</span></span><br><span class="line">    svg.call(zoom.transform, d3.zoomIdentity.translate(width / <span class="number">2</span>, height / <span class="number">2</span>).scale(<span class="number">0.9</span>));</span><br><span class="line"></span><br><span class="line">    getData();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    d3.json(<span class="string">"data.json"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 层次结构不变，转换成d3需要的数据结构(这时还没有坐标数据)</span></span><br><span class="line">        rootData = d3.hierarchy(data, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d.children; &#125;);</span><br><span class="line">        rootData.children.forEach(collapse);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Collapse the node and all it's children</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">collapse</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.children) &#123;</span><br><span class="line">                d._children = d.children;</span><br><span class="line">                d._children.forEach(collapse);</span><br><span class="line">                d.children = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        drawTree(rootData);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据数据初始化结构树，以及动画逻辑</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawTree</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * @method radialPoint 从12点钟方向 顺时针开始渲染</span></span><br><span class="line"><span class="comment">     * @param &#123;Number&#125; x 角度</span></span><br><span class="line"><span class="comment">     * @param &#123;Number&#125; y 半径</span></span><br><span class="line"><span class="comment">     * @return &#123;Array&#125; 返回横坐标和纵坐标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">radialPoint</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [(y = +y) * <span class="built_in">Math</span>.cos(x -= <span class="built_in">Math</span>.PI / <span class="number">2</span>), y * <span class="built_in">Math</span>.sin(x)];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 初始角度和半径</span></span><br><span class="line">    source.x0 = <span class="number">3.141592653589793</span>;</span><br><span class="line">    source.y0 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> treeData = tree(rootData); <span class="comment">// Assigns the x and y position for the nodes.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> nodes = treeData.descendants(); <span class="comment">// Array</span></span><br><span class="line">    <span class="keyword">var</span> links = treeData.links(); <span class="comment">// Array</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Normalize for fixed-depth.</span></span><br><span class="line">    nodes.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; </span><br><span class="line">        <span class="keyword">if</span>(d.depth === <span class="number">1</span>) &#123;</span><br><span class="line">            d.y = d.depth * <span class="number">180</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            d.y = d.depth * <span class="number">220</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> node = container.selectAll(<span class="string">".node"</span>)</span><br><span class="line">        .data(nodes, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="comment">// 必须设置id，否则会出现节点错位现象</span></span><br><span class="line">            <span class="keyword">return</span> d.id || (d.id = ++nodeIndex);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Enter</span></span><br><span class="line">    <span class="keyword">var</span> nodeEnter = node.enter().append(<span class="string">"g"</span>)</span><br><span class="line">        .attr(<span class="string">"class"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"node node"</span> + d.depth;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"translate("</span> + radialPoint(source.x0, source.y0) + <span class="string">")"</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth &gt; <span class="number">0</span>) toggle(d);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    nodeEnter.append(<span class="string">"circle"</span>)</span><br><span class="line">        .attr(<span class="string">"r"</span>, <span class="number">1e-6</span>)</span><br><span class="line">        .style(<span class="string">"stroke-opacity"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.children) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.5</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    nodeEnter.append(<span class="string">"path"</span>)</span><br><span class="line">        .attr(<span class="string">"d"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth &gt; <span class="number">0</span> &amp;&amp; d._children) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"M-6 -1 H-1 V-6 H1 V-1 H6 V1 H1 V6 H-1 V1 H-6 Z"</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(d.depth &gt; <span class="number">0</span> &amp;&amp; d.children) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"M-6 -1 H6 V1 H-6 Z"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .style(<span class="string">"fill-opacity"</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    nodeEnter.append(<span class="string">"text"</span>)</span><br><span class="line">        .attr(<span class="string">"dy"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"-1.5em"</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"0.31em"</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(<span class="string">"x"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> d.x &lt; <span class="built_in">Math</span>.PI ? <span class="number">16</span> : <span class="number">-16</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(<span class="string">"text-anchor"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"middle"</span>;</span><br><span class="line">            <span class="keyword">return</span> d.x &lt; <span class="built_in">Math</span>.PI ? <span class="string">"start"</span> : <span class="string">"end"</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"rotate(0)"</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"rotate("</span> + (d.x &lt; <span class="built_in">Math</span>.PI ? d.x - <span class="built_in">Math</span>.PI / <span class="number">2</span> : d.x + <span class="built_in">Math</span>.PI / <span class="number">2</span>) * <span class="number">180</span> / <span class="built_in">Math</span>.PI + <span class="string">")"</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .text(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> d.data.name;</span><br><span class="line">        &#125;)</span><br><span class="line">        .style(<span class="string">"fill-opacity"</span>, <span class="number">1e-6</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update</span></span><br><span class="line">    <span class="keyword">var</span> nodeUpdate = nodeEnter.merge(node).transition()</span><br><span class="line">        .duration(<span class="number">600</span>)</span><br><span class="line">        .attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"translate("</span> + radialPoint(d.x, d.y) + <span class="string">")"</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    nodeUpdate.select(<span class="string">"circle"</span>)</span><br><span class="line">        .attr(<span class="string">"r"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">12</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(d.depth &lt; <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .style(<span class="string">"stroke-opacity"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.children) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.5</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    nodeUpdate.select(<span class="string">"path"</span>)</span><br><span class="line">        .attr(<span class="string">"d"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth &gt; <span class="number">0</span> &amp;&amp; d._children) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"M-6 -1 H-1 V-6 H1 V-1 H6 V1 H1 V6 H-1 V1 H-6 Z"</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(d.depth &gt; <span class="number">0</span> &amp;&amp; d.children) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"M-6 -1 H6 V1 H-6 Z"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .style(<span class="string">"fill-opacity"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    nodeUpdate.select(<span class="string">"text"</span>)</span><br><span class="line">        .attr(<span class="string">"x"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> d.x &lt; <span class="built_in">Math</span>.PI ? <span class="number">16</span> : <span class="number">-16</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(<span class="string">"text-anchor"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"middle"</span>;</span><br><span class="line">            <span class="keyword">return</span> d.x &lt; <span class="built_in">Math</span>.PI ? <span class="string">"start"</span> : <span class="string">"end"</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.depth === <span class="number">0</span>) <span class="keyword">return</span> <span class="string">"rotate(0)"</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"rotate("</span> + (d.x &lt; <span class="built_in">Math</span>.PI ? d.x - <span class="built_in">Math</span>.PI / <span class="number">2</span> : d.x + <span class="built_in">Math</span>.PI / <span class="number">2</span>) * <span class="number">180</span> / <span class="built_in">Math</span>.PI + <span class="string">")"</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .style(<span class="string">"fill-opacity"</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Exit</span></span><br><span class="line">    <span class="keyword">var</span> nodeExit = node.exit().transition()</span><br><span class="line">        .duration(<span class="number">600</span>)</span><br><span class="line">        .attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"translate("</span> + radialPoint(source.x, source.y) + <span class="string">")"</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .remove();</span><br><span class="line"></span><br><span class="line">    nodeExit.select(<span class="string">"circle"</span>)</span><br><span class="line">        .attr(<span class="string">"r"</span>, <span class="number">1e-6</span>);</span><br><span class="line"></span><br><span class="line">    nodeExit.select(<span class="string">"path"</span>)</span><br><span class="line">        .style(<span class="string">"fill-opacity"</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    nodeExit.select(<span class="string">"text"</span>)</span><br><span class="line">        .style(<span class="string">"fill-opacity"</span>, <span class="number">1e-6</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> link = linkContainer.selectAll(<span class="string">".link"</span>)</span><br><span class="line">        .data(links, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="comment">// 此行配置需放在node配置之后</span></span><br><span class="line">            <span class="keyword">return</span> d.id || (d.id = <span class="string">"link"</span> + d.source.id + d.target.id);</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> linkRadial = d3.linkRadial();</span><br><span class="line">    <span class="keyword">var</span> linkEnter = link.enter().append(<span class="string">"path"</span>)</span><br><span class="line">        .attr(<span class="string">"class"</span>, <span class="string">"link"</span>)</span><br><span class="line">        .attr(<span class="string">"d"</span>, linkRadial</span><br><span class="line">            .angle(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> source.x0;</span><br><span class="line">            &#125;)</span><br><span class="line">            .radius(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> source.y0;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    linkEnter.merge(link).transition()</span><br><span class="line">        .duration(<span class="number">600</span>)</span><br><span class="line">        .attr(<span class="string">"d"</span>, linkRadial</span><br><span class="line">            .angle(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> d.x;</span><br><span class="line">            &#125;)</span><br><span class="line">            .radius(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> d.y;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    link.exit().transition()</span><br><span class="line">        .duration(<span class="number">600</span>)</span><br><span class="line">        .attr(<span class="string">"d"</span>, linkRadial</span><br><span class="line">            .angle(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> source.x;</span><br><span class="line">            &#125;)</span><br><span class="line">            .radius(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> source.y;</span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">        .remove();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Store the old positions for transition.</span></span><br><span class="line">    nodes.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">        d.x0 = d.x;</span><br><span class="line">        d.y0 = d.y;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toggle</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (d.children) &#123;</span><br><span class="line">        d._children = d.children;</span><br><span class="line">        d.children = <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        d.children = d._children;</span><br><span class="line">        d._children = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    drawTree(d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="css"><a class="markdownIt-Anchor" href="#css"></a> CSS</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tree</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> <span class="selector-tag">circle</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#888</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> <span class="selector-tag">text</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#666</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> <span class="selector-tag">path</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">stroke</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">stroke-width</span>: <span class="number">0.2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.node0</span> <span class="selector-tag">circle</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#aaceff</span>;</span><br><span class="line">    <span class="attribute">stroke-opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">    <span class="attribute">stroke</span>: <span class="number">#aaceff</span>;</span><br><span class="line">    <span class="attribute">stroke-width</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node1</span> <span class="selector-tag">circle</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#fd9bb4</span>;</span><br><span class="line">    <span class="attribute">stroke</span>: <span class="number">#fd9bb4</span>;</span><br><span class="line">    <span class="attribute">stroke-width</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node2</span> <span class="selector-tag">circle</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#af9ffc</span>;</span><br><span class="line">    <span class="attribute">stroke</span>: <span class="number">#af9ffc</span>;</span><br><span class="line">    <span class="attribute">stroke-width</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node3</span> <span class="selector-tag">circle</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#9be4b7</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*.node.node-child circle &#123;</span></span><br><span class="line"><span class="comment">    stroke-opacity: 0.5;</span></span><br><span class="line"><span class="comment">    transform: scale(1.2);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">text</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">circle</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:not(.node3)</span> <span class="selector-tag">text</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>, <span class="number">0</span> -<span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>, <span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">#fff</span>, -<span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node0</span> <span class="selector-tag">text</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.link</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: none;</span><br><span class="line">    <span class="attribute">stroke</span>: <span class="number">#c6c6c6</span>;</span><br><span class="line">    <span class="attribute">stroke-opacity</span>: <span class="number">0.4</span>;</span><br><span class="line">    <span class="attribute">stroke-width</span>: <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="datajson"><a class="markdownIt-Anchor" href="#datajson"></a> data.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"flare"</span>,</span><br><span class="line">    <span class="attr">"children"</span>: [&#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"analytics"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"cluster"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"AgglomerativeCluster"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">3938</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"CommunityStructure"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">3812</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"HierarchicalCluster"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">6714</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"MergeEdge"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">743</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"graph"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"BetweennessCentrality"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">3534</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"LinkDistance"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">5731</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"MaxFlowMinCut"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">7840</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ShortestPaths"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">5914</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"SpanningTree"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">3416</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"optimization"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"AspectRatioBanker"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">7074</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"animate"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Easing"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">17010</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"FunctionSequence"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">5842</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"interpolate"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ArrayInterpolator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1983</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ColorInterpolator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2047</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"DateInterpolator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1375</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Interpolator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">8746</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"MatrixInterpolator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2202</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"NumberInterpolator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1382</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ObjectInterpolator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1629</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"PointInterpolator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1675</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"RectangleInterpolator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2042</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"ISchedulable"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1041</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Parallel"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">5176</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Pause"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">449</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Scheduler"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">5593</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Sequence"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">5534</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Transition"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">9201</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Transitioner"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">19975</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"TransitionEvent"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1116</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Tween"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">6006</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"data"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"converters"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Converters"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">721</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"DelimitedTextConverter"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">4294</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"GraphMLConverter"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">9800</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"IDataConverter"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1314</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"JSONConverter"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2220</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"DataField"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1759</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"DataSchema"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">2165</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"DataSet"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">586</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"DataSource"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3331</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"DataTable"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">772</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"DataUtil"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3322</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"display"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"DirtySprite"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">8833</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"LineSprite"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1732</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"RectSprite"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3623</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"TextSprite"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">10066</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"flex"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"FlareVis"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">4116</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"physics"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"DragForce"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1082</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"GravityForce"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1336</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"IForce"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">319</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"NBodyForce"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">10498</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Particle"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">2822</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Simulation"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">9983</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Spring"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">2213</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"SpringForce"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1681</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"query"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"AggregateExpression"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1616</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"And"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1027</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Arithmetic"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3891</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Average"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">891</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"BinaryExpression"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">2893</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Comparison"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">5103</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"CompositeExpression"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3677</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Count"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">781</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"DateUtil"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">4141</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Distinct"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">933</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Expression"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">5130</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"ExpressionIterator"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3617</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Fn"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3240</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"If"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">2732</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"IsA"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">2039</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Literal"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1214</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Match"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3748</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Maximum"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">843</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"methods"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"add"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">593</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"and"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">330</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"average"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">287</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"count"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">277</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"distinct"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">292</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"div"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">595</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"eq"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">594</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"fn"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">460</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"gt"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">603</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"gte"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">625</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"iff"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">748</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"isa"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">461</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"lt"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">597</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"lte"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">619</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"max"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">283</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"min"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">283</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"mod"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">591</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"mul"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">603</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"neq"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">599</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"not"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">386</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"or"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">323</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"orderby"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">307</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"range"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">772</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"select"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">296</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"stddev"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">363</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"sub"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">600</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"sum"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">280</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"update"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">307</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"variance"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">335</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"where"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">299</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"xor"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">354</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"_"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">264</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Minimum"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">843</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Not"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1554</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Or"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">970</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Query"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">13896</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Range"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1594</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"StringUtil"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">4130</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Sum"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">791</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Variable"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1124</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Variance"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1876</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Xor"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1101</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"scale"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"IScaleMap"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">2105</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"LinearScale"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1316</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"LogScale"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3151</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"OrdinalScale"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">3770</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"QuantileScale"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">2435</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"QuantitativeScale"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">4839</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"RootScale"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1756</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Scale"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">4268</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"ScaleType"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1821</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"TimeScale"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">5833</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"util"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Arrays"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">8258</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Colors"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">10001</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Dates"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">8217</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Displays"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">12555</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Filter"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">2324</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Geometry"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">10993</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"heap"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"FibonacciHeap"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">9354</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"HeapNode"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1233</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"IEvaluable"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">335</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"IPredicate"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">383</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"IValueProxy"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">874</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"math"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"DenseMatrix"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">3165</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"IMatrix"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2815</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"SparseMatrix"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">3366</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Maths"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">17705</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Orientation"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">1486</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"palette"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ColorPalette"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">6367</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Palette"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1229</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ShapePalette"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2059</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"SizePalette"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2291</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Property"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">5559</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Shapes"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">19118</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Sort"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">6887</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Stats"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">6557</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Strings"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">22026</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"vis"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [&#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"axis"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Axes"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1302</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Axis"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">24593</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"AxisGridLine"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">652</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"AxisLabel"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">636</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"CartesianAxes"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">6703</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"controls"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"AnchorControl"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2138</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ClickControl"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">3824</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Control"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1353</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ControlList"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">4665</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"DragControl"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2649</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ExpandControl"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2832</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"HoverControl"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">4896</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"IControl"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">763</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"PanZoomControl"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">5222</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"SelectionControl"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">7862</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"TooltipControl"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">8435</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"data"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Data"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">20544</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"DataList"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">19788</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"DataSprite"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">10349</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"EdgeSprite"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">3301</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"NodeSprite"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">19382</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"render"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"ArrowType"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">698</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"EdgeRenderer"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">5569</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"IRenderer"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">353</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"ShapeRenderer"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">2247</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"ScaleBinding"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">11275</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Tree"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">7147</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"TreeBuilder"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">9930</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"events"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"DataEvent"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2313</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"SelectionEvent"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1880</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"TooltipEvent"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1701</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"VisualizationEvent"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1117</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"legend"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Legend"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">20859</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"LegendItem"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">4614</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"LegendRange"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">10530</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"operator"</span>,</span><br><span class="line">            <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"distortion"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"BifocalDistortion"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">4461</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"Distortion"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">6314</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"FisheyeDistortion"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">3444</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"encoder"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"ColorEncoder"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">3179</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"Encoder"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">4060</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"PropertyEncoder"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">4138</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"ShapeEncoder"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">1690</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"SizeEncoder"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">1830</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"filter"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"FisheyeTreeFilter"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">5219</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"GraphDistanceFilter"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">3165</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"VisibilityFilter"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">3509</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"IOperator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">1286</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"label"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"Labeler"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">9956</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"RadialLabeler"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">3899</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"StackedAreaLabeler"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">3202</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"layout"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [&#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"AxisLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">6725</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"BundledEdgeRouter"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">3727</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"CircleLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">9317</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"CirclePackingLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">12003</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"DendrogramLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">4853</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"ForceDirectedLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">8411</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"IcicleTreeLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">4864</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"IndentedTreeLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">3174</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"Layout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">7881</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"NodeLinkTreeLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">12870</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"PieLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">2728</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"RadialTreeLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">12348</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"RandomLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">870</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"StackedAreaLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">9121</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    <span class="attr">"name"</span>: <span class="string">"TreeMapLayout"</span>,</span><br><span class="line">                    <span class="attr">"size"</span>: <span class="number">9191</span></span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"Operator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2490</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"OperatorList"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">5248</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"OperatorSequence"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">4190</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"OperatorSwitch"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2581</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"SortOperator"</span>,</span><br><span class="line">                <span class="attr">"size"</span>: <span class="number">2023</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Visualization"</span>,</span><br><span class="line">            <span class="attr">"size"</span>: <span class="number">16540</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="radial-dendrogram"><a class="markdownIt-Anchor" href="#radial-dendrogram"></a> Radial Dendrogram</h2><p><img src="https://i.loli.net/2018/03/17/5aaceb772b160.png" alt="18_3_17_02.png"></p><p>这种布局看起来不太紧凑，但有时候却很有用，所有叶子节点都在统一水平，可以利用鼠标交互高亮来突出内部节点到根节点的深度。</p><p><a href="https://bl.ocks.org/mbostock/c034d66572fd6bd6815a" target="_blank" rel="noopener">更多cluster布局</a></p><h3 id="html-2"><a class="markdownIt-Anchor" href="#html-2"></a> HTML</h3><p>HTML代码同上</p><h3 id="javascript-2"><a class="markdownIt-Anchor" href="#javascript-2"></a> javascript</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tree, <span class="comment">// d3 树型图对象</span></span><br><span class="line">    rootData, <span class="comment">// 根节点</span></span><br><span class="line">    container, <span class="comment">// g所有svg元素的容器</span></span><br><span class="line">    linkContainer, <span class="comment">// link的容器</span></span><br><span class="line"></span><br><span class="line">draw();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">oElement, sName</span>) </span>&#123; <span class="comment">// 兼容火狐和IE</span></span><br><span class="line">        <span class="keyword">return</span> oElement.currentStyle ? oElement.currentStyle[sName] : <span class="built_in">window</span>.getComputedStyle(oElement, <span class="literal">null</span>)[sName];  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tree = d3.cluster()</span><br><span class="line">        .size([<span class="number">360</span>, <span class="number">600</span>])</span><br><span class="line">        .separation(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123; <span class="keyword">return</span> (a.parent === b.parent ? <span class="number">1</span> : <span class="number">2</span>) / a.depth &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> con = d3.select(<span class="string">"#tree"</span>),</span><br><span class="line">        width = <span class="built_in">parseInt</span>(getStyle(con._groups[<span class="number">0</span>][<span class="number">0</span>], <span class="string">"width"</span>), <span class="number">10</span>),</span><br><span class="line">        height = <span class="built_in">parseInt</span>(getStyle(con._groups[<span class="number">0</span>][<span class="number">0</span>], <span class="string">"height"</span>), <span class="number">10</span>),</span><br><span class="line">        svg = con.append(<span class="string">"svg"</span>)</span><br><span class="line">            .attr(<span class="string">"xmlns"</span>, <span class="string">"http://www.w3.org/2000/svg"</span>)</span><br><span class="line">            .attr(<span class="string">"width"</span>, width)</span><br><span class="line">            .attr(<span class="string">"height"</span>, height);</span><br><span class="line"></span><br><span class="line">    container = svg.append(<span class="string">"g"</span>);</span><br><span class="line">    linkContainer = container.append(<span class="string">"g"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 注意：火狐浏览器的缩放程度是chrome的3倍</span></span><br><span class="line">    <span class="keyword">var</span> zoom = d3.zoom()</span><br><span class="line">        .scaleExtent([<span class="number">0.4</span>, <span class="number">2</span>])</span><br><span class="line">        .on(<span class="string">"zoom"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            container.attr(<span class="string">"transform"</span>, d3.event.transform); <span class="comment">//v4: 原来的translate和scale值现在都在 event.transform 中</span></span><br><span class="line">        &#125;);</span><br><span class="line">    svg.call(zoom);</span><br><span class="line">    <span class="comment">// 初始化g标签的位置（居中）</span></span><br><span class="line">    svg.call(zoom.transform, d3.zoomIdentity.translate(width / <span class="number">2</span>, height / <span class="number">2</span>).scale(<span class="number">0.9</span>));</span><br><span class="line"></span><br><span class="line">    getData();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    d3.json(<span class="string">"data.json"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"></span><br><span class="line">        rootData = d3.hierarchy(data, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d.children; &#125;); <span class="comment">// 层次结构不变，转换成d3需要的数据结构(这时还没有坐标数据)</span></span><br><span class="line">        </span><br><span class="line">        drawTree(rootData);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawTree</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> treeData = tree(rootData);</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">var</span> nodes = treeData.descendants();</span><br><span class="line">    <span class="keyword">var</span> links = treeData.links();</span><br><span class="line">    <span class="comment">// console.log(nodes);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> linkRadial = d3.linkRadial();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> link = linkContainer.selectAll(<span class="string">".link"</span>)</span><br><span class="line">        .data(links)</span><br><span class="line">        .enter().append(<span class="string">"path"</span>)</span><br><span class="line">        .attr(<span class="string">"class"</span>, <span class="string">"link"</span>)</span><br><span class="line">        .attr(<span class="string">"d"</span>, linkRadial</span><br><span class="line">            .angle(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> d.x * <span class="built_in">Math</span>.PI / <span class="number">180</span>;</span><br><span class="line">            &#125;)</span><br><span class="line">            .radius(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> d.y;</span><br><span class="line">            &#125;)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> node = container.selectAll(<span class="string">".node"</span>)</span><br><span class="line">        .data(nodes)</span><br><span class="line">        .enter().append(<span class="string">"g"</span>)</span><br><span class="line">        .attr(<span class="string">"class"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"node"</span> + (d.children ? <span class="string">" node-internal"</span> : <span class="string">" node-leaf"</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"translate("</span> + radialPoint(d.x, d.y) + <span class="string">")"</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    node.append(<span class="string">"circle"</span>)</span><br><span class="line">        .attr(<span class="string">"r"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(d.children) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">6</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    node.append(<span class="string">"text"</span>)</span><br><span class="line">        .attr(<span class="string">"dy"</span>, <span class="string">"0.31em"</span>)</span><br><span class="line">        .attr(<span class="string">"x"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (d.x &lt; <span class="number">180</span>) === !d.children ? <span class="number">12</span> : <span class="number">-12</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .style(<span class="string">"text-anchor"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> (d.x &lt; <span class="number">180</span>) === !d.children ? <span class="string">"start"</span> : <span class="string">"end"</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"rotate("</span> + (d.x &lt; <span class="number">180</span> ? d.x - <span class="number">90</span> : d.x + <span class="number">90</span>) + <span class="string">")"</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .text(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> d.data.name;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">radialPoint</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> angle = (x - <span class="number">90</span>) / <span class="number">180</span> * <span class="built_in">Math</span>.PI, radius = y;</span><br><span class="line">        <span class="keyword">return</span> [radius * <span class="built_in">Math</span>.cos(angle), radius * <span class="built_in">Math</span>.sin(angle)];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="css-2"><a class="markdownIt-Anchor" href="#css-2"></a> CSS</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tree</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.node</span> <span class="selector-tag">circle</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#888</span>;</span><br><span class="line">    <span class="comment">/*stroke-opacity: 0;*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span> <span class="selector-tag">text</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#666</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">text</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">circle</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(1.2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node-internal</span> <span class="selector-tag">circle</span>&#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#fd9bb4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node-leaf</span> <span class="selector-tag">circle</span>&#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#af9ffc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.node</span><span class="selector-pseudo">:not(.node-leaf)</span> <span class="selector-tag">text</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>, <span class="number">0</span> -<span class="number">1px</span> <span class="number">0</span> <span class="number">#fff</span>, <span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">#fff</span>, -<span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.link</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: none;</span><br><span class="line">    <span class="attribute">stroke</span>: <span class="number">#c6c6c6</span>;</span><br><span class="line">    <span class="attribute">stroke-opacity</span>: <span class="number">0.4</span>;</span><br><span class="line">    <span class="attribute">stroke-width</span>: <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="提示"><a class="markdownIt-Anchor" href="#提示"></a> 提示</h2><p>D3 的代码可以完美地植入到 React 中，在<code>componentDidMount</code>中操作就行，无需<code>setState</code>，D3 会自动更新 DOM，你只需处理相关数据的逻辑就可以了。<br>D3 的布局还有好几种，以后还会具体讲到，敬请关注。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;D3 是 Data-Driven Documents 的简称，意思是数据驱动的文档，他本质上是一个 JavaScript 函数库。D3.js 的原理 是使用HTML, SVG, CSS 来表现数据，用户将数据绑定到DOM，然后根据数据来操作文档，创建可交互的图形。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2018/03/17/5aaceb771d774.png&quot; alt=&quot;18_3_17_01.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="D3.js" scheme="https://me.chjiyun.com/categories/D3-js/"/>
    
    
      <category term="D3.js" scheme="https://me.chjiyun.com/tags/D3-js/"/>
    
  </entry>
  
  <entry>
    <title>CSS实现自适应九宫格布局</title>
    <link href="https://me.chjiyun.com/2017/12/08/CSS%E5%AE%9E%E7%8E%B0%E8%87%AA%E9%80%82%E5%BA%94%E4%B9%9D%E5%AE%AB%E6%A0%BC%E5%B8%83%E5%B1%80/"/>
    <id>https://me.chjiyun.com/2017/12/08/CSS实现自适应九宫格布局/</id>
    <published>2017-12-08T08:38:46.000Z</published>
    <updated>2018-03-28T14:05:30.251Z</updated>
    
    <content type="html"><![CDATA[<p>看到微博和朋友圈都实现了图片九宫格，曾经有次面试也问到了九宫格这个问题，当时想到的是先固定每个单元格的宽高，然后进行浮动。今天想折腾一下，实现自适应父元素宽度的布局。这次我只写了四种方式去实现九宫格，算上<code>inline-block</code>的话就是五种了。</p><a id="more"></a><p>首先要注意的是九宫格容器是宽高相等的正方形，并且是自适应的，这里关键是实现宽高相等，有些人想到了相对视口宽度 <strong>vw</strong>，但是它是相对于屏幕可见宽度来设置的，并且会忽略滚动条的宽度，所以这是不可行的。这里我用一种变通方法，看代码…</p><h2 id="flexbox"><a class="markdownIt-Anchor" href="#flexbox"></a> FlexBox</h2><p>HTML 结构如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"square"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"square-inner flex"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>8<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>9<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>抽取公共样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.square</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">100%</span>; <span class="comment">/* padding百分比是相对父元素宽度计算的 */</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.square-inner</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>; <span class="comment">/* 铺满父元素容器，这时候宽高就始终相等了 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.square-inner</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="built_in">calc</span>(98% / 3);  <span class="comment">/* calc里面的运算符两边要空格 */</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="built_in">calc</span>(98% / 3);</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">1%</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用Flex的一个好处是不用再担心高度塌陷的问题，而且还可以轻松实现子元素横向竖向甚至按比例伸缩扩展的布局。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.flex</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>; <span class="comment">/* 子元素按1/n的比例进行拉伸 */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#4d839c</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type(3n)</span>&#123; <span class="comment">/* 选择个数是3的倍数的元素 */</span></span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type(n+7)</span>&#123;  <span class="comment">/* 选择倒数的三个元素，n可以取0 */</span></span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/12/08/5a2a6c7ca0c88.png" alt="17_12_08_01.png" title="FlexBox-效果图"></p><h2 id="grid"><a class="markdownIt-Anchor" href="#grid"></a> Grid</h2><p>对于网格布局来说，grid 比 flex 更为方便，代码量更少，可以处理更为复杂的结构。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"square"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"square-inner grid"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>5<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>6<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>7<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>8<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>9<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.grid</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(3, 1fr); <span class="comment">/* 相当于 1fr 1fr 1fr */</span></span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(3, 1fr); <span class="comment">/* fr单位可以将容器分为几等份 */</span></span><br><span class="line">  <span class="attribute">grid-gap</span>: <span class="number">1%</span>; <span class="comment">/* grid-column-gap 和 grid-row-gap的简写 */</span></span><br><span class="line">  <span class="attribute">grid-auto-flow</span>: row;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.grid</span>&gt;<span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom, #f5f6f6 0%,#dbdce2 21%,#b8bac6 49%,#dddfe3 80%,#f5f6f6 100%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/12/10/5a2cf18e48460.png" alt="17_12_08_05.png" title="Grid-效果图"></p><p>更多：<a href="http://blog.csdn.net/ceshi986745/article/details/51733383" target="_blank" rel="noopener">CSS Grid布局指南</a></p><h2 id="float"><a class="markdownIt-Anchor" href="#float"></a> Float</h2><p>浮动实现九宫格就不多说了，原理同上。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"square"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"square-inner float"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>7<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>8<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>9<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.float</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.float</span>&gt;<span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#42a59f</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.float</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type(3n)</span>&#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.float</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-of-type(n+7)</span>&#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/12/08/5a2a6c7ca6312.png" alt="17_12_08_02.png" title="Float-效果图"></p><p>除了浮动，这里 li 也可以使用<code>display: inline-block;</code>实现同样的效果，不过要注意HTML代码非压缩情况下行块级元素之间会出现默认间隔，不同浏览器下表现还不一样，这时可以给父级元素设置<code>font-size: 0;</code></p><h2 id="table"><a class="markdownIt-Anchor" href="#table"></a> Table</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"square"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"square-inner table"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>5<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>6<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>7<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>8<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>9<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.table</span>&#123;</span><br><span class="line">  <span class="attribute">border-collapse</span>: separate;</span><br><span class="line">  <span class="attribute">border-spacing</span>: <span class="number">0.57em</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">empty-cells</span>: hide;</span><br><span class="line">  <span class="attribute">table-layout</span>: fixed;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.table</span>&gt;<span class="selector-tag">tbody</span>&gt;<span class="selector-tag">tr</span>&gt;<span class="selector-tag">td</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#889ed8</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/12/08/5a2a6c7cab47a.png" alt="17_12_08_03.png" title="Table-效果图"></p><p>说下用表格实现九宫格有哪些瑕疵：</p><ul><li>最后一行最后一列的单元格宽高与前面的不一致，虽然相差不大，但是还是有差异的；</li><li>与前面的两种方法不同，table 单元格之间的间隔是利用<code>border-spacing</code>属性实现的，且不支持百分比，单元格四周都有类似margin的外边距效果，如下图。</li></ul><p><img src="https://i.loli.net/2017/12/08/5a2a7142123ad.png" alt="17_12_08_04.png" title="浏览器渲染效果图"></p><h2 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h2><p>综上来看，个人认为 FlexBox 适合用于移动端，PC端 IE10 以下不支持；Grid网格布局比较方便，但是规范还未成熟，主流浏览器厂商尚未推广，不推荐使用在项目中；浮动和行块级式声明可以兼容到IE6，移动端和PC端支持的都不错；Table 因为实现有瑕疵所以不推荐使用。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;看到微博和朋友圈都实现了图片九宫格，曾经有次面试也问到了九宫格这个问题，当时想到的是先固定每个单元格的宽高，然后进行浮动。今天想折腾一下，实现自适应父元素宽度的布局。这次我只写了四种方式去实现九宫格，算上&lt;code&gt;inline-block&lt;/code&gt;的话就是五种了。&lt;/p&gt;
    
    </summary>
    
      <category term="CSS" scheme="https://me.chjiyun.com/categories/CSS/"/>
    
    
      <category term="CSS" scheme="https://me.chjiyun.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>正则表达式</title>
    <link href="https://me.chjiyun.com/2017/11/27/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <id>https://me.chjiyun.com/2017/11/27/正则表达式/</id>
    <published>2017-11-27T13:19:27.000Z</published>
    <updated>2019-02-24T06:58:54.640Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>正则表达式 (Regular Expression) 语言由两种基本字符类型组成：原义（正常）文本字符和元字符。元字符使正则表达式具有处理能力。所谓元字符就是指那些在正则表达式中具有特殊意义的专用字符。</p></blockquote><a id="more"></a><style type="text/css">table>tbody>tr>td:first-child{white-space:nowrap}</style><h2 id="语法"><a class="markdownIt-Anchor" href="#语法"></a> 语法</h2><p>字面量, 构造函数和工厂符号都可以定义一个正则对象</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/pattern/flags</span><br><span class="line">new RegExp(pattern, [flags])</span><br><span class="line">RegExp(pattern, [flags])</span><br><span class="line">//例如</span><br><span class="line">var re = new RegExp(/^\d&#123;3,&#125;$/, [&quot;i&quot;])</span><br></pre></td></tr></table></figure><p>pattern：正则表达式的文本<br>flags：修饰符</p><table><thead><tr><th style="text-align:center">flags</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">i</td><td>执行对大小写不敏感的匹配</td></tr><tr><td style="text-align:center">g</td><td>全局匹配（会查找所有匹配结果，不会在查找到第一个匹配后就停止）</td></tr><tr><td style="text-align:center">m</td><td>执行多行匹配</td></tr></tbody></table><h2 id="元字符"><a class="markdownIt-Anchor" href="#元字符"></a> 元字符</h2><table><thead><tr><th style="text-align:center">定位符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">^</td><td>匹配行或者字符串的起始位置，有时还会匹配整个文档的起始位置</td></tr><tr><td style="text-align:center">$</td><td>匹配行或字符串的结尾</td></tr><tr><td style="text-align:center">\b</td><td>匹配单词边界，即单词与空格间的位置</td></tr><tr><td style="text-align:center">\B</td><td>匹配非单词边界</td></tr></tbody></table><hr><table><thead><tr><th style="text-align:center">字符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">\d</td><td>匹配数字</td></tr><tr><td style="text-align:center">\D</td><td>匹配任意非数字的字符</td></tr><tr><td style="text-align:center">\w</td><td>匹配字母，数字，下划线</td></tr><tr><td style="text-align:center">\W</td><td>匹配任意不是字母，数字，下划线的字符</td></tr><tr><td style="text-align:center"><strong>.</strong></td><td>匹配除了换行符以外的任何字符</td></tr><tr><td style="text-align:center">( )</td><td>标记一个子表达式的开始和结束位置，常用于分组，子表达式可以获取供以后使用</td></tr><tr><td style="text-align:center">|</td><td>类似于或运算符，匹配两项之间的一个选择</td></tr><tr><td style="text-align:center">[</td><td>中括号表达式的开始</td></tr><tr><td style="text-align:center">{</td><td>限定符表达式的开始</td></tr><tr><td style="text-align:center">\</td><td>将下一个字符进行转义，要匹配’\d’，请使用’\\d’</td></tr><tr><td style="text-align:center">[abc]</td><td>匹配括号内指定元素的字符，也可以写成 [a-z] 匹配所有小写英文字母</td></tr><tr><td style="text-align:center">[^abc]</td><td>匹配除了abc以外的任意字符</td></tr></tbody></table><hr><table><thead><tr><th style="text-align:center">非打印字符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">\cx</td><td>匹配由x指明的控制字符，例如 \cM 匹配一个 Control-M 或回车符，x 的值必须为A-Z或a-z之一</td></tr><tr><td style="text-align:center">\f</td><td>匹配一个换页符，等价于 \x0c 和 \cL</td></tr><tr><td style="text-align:center">\n</td><td>匹配一个换行符，等价于 \x0a 和 \cJ</td></tr><tr><td style="text-align:center">\r</td><td>匹配一个回车符，等价于 \x0d 和 \cM</td></tr><tr><td style="text-align:center">\s</td><td>匹配任何空白字符，包括空格、制表符、换页符等等，等价于 [\f\n\r\t\v]</td></tr><tr><td style="text-align:center">\S</td><td>匹配任何非空白字符，等价于 [^\f\n\r\t\v]</td></tr><tr><td style="text-align:center">\t</td><td>匹配一个制表符，等价于 \x09 和 \cI</td></tr><tr><td style="text-align:center">\v</td><td>匹配一个垂直制表符，等价于 \x0b 和 \cK</td></tr></tbody></table><hr><table><thead><tr><th style="text-align:center">贪婪限定符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">*</td><td>匹配前面的子表达式任意次</td></tr><tr><td style="text-align:center">+</td><td>匹配前面的子表达式一次或多次</td></tr><tr><td style="text-align:center">?</td><td>匹配前面的子表达式零次或一次</td></tr><tr><td style="text-align:center">{n}</td><td>匹配n次( n&gt;0 )</td></tr><tr><td style="text-align:center">{n,}</td><td>至少匹配n次( n&gt;0 )</td></tr><tr><td style="text-align:center">{n,m}</td><td>至少匹配n次且最多匹配m次( m&gt;=n&gt;0 )</td></tr></tbody></table><hr><table><thead><tr><th style="text-align:center">惰性限定符</th><th>描述</th></tr></thead><tbody><tr><td style="text-align:center">*?</td><td>匹配前面的子表达式任意次，但是尽可能少重复</td></tr><tr><td style="text-align:center">+?</td><td>匹配前面的子表达式一次或多次，但是尽可能少重复</td></tr><tr><td style="text-align:center">??</td><td>匹配前面的子表达式零次或一次，但是尽可能少重复</td></tr><tr><td style="text-align:center">{n,}?</td><td>至少匹配n次( n&gt;0 )，但是尽可能少重复</td></tr><tr><td style="text-align:center">{n,m}?</td><td>至少匹配n次且最多匹配m次( m&gt;=n&gt;0 )，但是尽可能少重复</td></tr></tbody></table><h2 id="正则进阶"><a class="markdownIt-Anchor" href="#正则进阶"></a> 正则进阶</h2><table><thead><tr><th style="text-align:center">捕获型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">( abc )</td><td style="text-align:left">匹配abc，并捕获文本到自动命名的组里</td></tr><tr><td style="text-align:center">( ?&lt;name&gt;abc )</td><td style="text-align:left">匹配abc，并捕获文本到名称为name的组里</td></tr></tbody></table><table><thead><tr><th style="text-align:center">非捕获型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:center">( ?:x )</td><td style="text-align:left">匹配abc，不捕获匹配的文本，也不给此分组分配组号</td></tr><tr><td style="text-align:center">( ?=x )</td><td style="text-align:left">零宽度正先行断言，仅当子表达式 x 在此位置的右侧匹配时才继续匹配，且此构造不会回溯。例如，/\d+(?=\.)/ 匹配 “3.141” 中数字后面是&quot;.“的实例，也就是&quot;3”。</td></tr><tr><td style="text-align:center">( ?!x )</td><td style="text-align:left">零宽度负先行断言，仅当子表达式 x 不在此位置的右侧匹配时才继续匹配，例如，/\d+(?!\.)/ 匹配 “3.141x159” 中数字后面不是&quot;.“的实例，也就是&quot;141”。</td></tr><tr><td style="text-align:center">( ?&lt;=x )</td><td style="text-align:left">零宽度正后发断言（ES9已支持），仅当子表达式 x 在此位置的左侧匹配时才继续匹配，且此构造不会回溯，例如，/(?&lt;=\.)\d+/ 匹配 “3.141” 中跟在&quot;.“后面的数字实例，也就是&quot;141”。</td></tr><tr><td style="text-align:center">( ?&lt;!x )</td><td style="text-align:left">零宽度负后发断言（ES9已支持），仅当子表达式 x 不在此位置的左侧匹配时才继续匹配，例如，/(?!\.)\d{3}/ 匹配 “3.141x592” 中没有跟在&quot;.“后面的三位数字实例，也就是&quot;592”。</td></tr></tbody></table><h2 id="应用"><a class="markdownIt-Anchor" href="#应用"></a> 应用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//匹配手机号</span><br><span class="line">/^1[34578]&#123;9&#125;$/</span><br><span class="line">//验证邮箱</span><br><span class="line">/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/</span><br><span class="line">//验证身份证</span><br><span class="line">/^[1-9]\d&#123;5&#125;[1-9]\d&#123;3&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d&#123;3&#125;([0-9]|X)$/</span><br><span class="line">//验证用户名</span><br><span class="line">/^[a-zA-Z][a-zA-Z0-9\-\_]&#123;5,15&#125;$/</span><br><span class="line">//验证中文混合用户名</span><br><span class="line">/^[\u4e00-\u9fa5a\-\w]+$/</span><br><span class="line">//8-16位密码，数字字母两者都有</span><br><span class="line">/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]&#123;8,16&#125;$/</span><br><span class="line">//获取url的search参数</span><br><span class="line">/^\?s=(.*)$/</span><br></pre></td></tr></table></figure><h2 id="在线测试工具"><a class="markdownIt-Anchor" href="#在线测试工具"></a> 在线测试工具</h2><ul><li><a href="http://tool.oschina.net/regex/" target="_blank" rel="noopener">http://tool.oschina.net/regex/</a></li><li><a href="https://regexr.com/" target="_blank" rel="noopener">https://regexr.com/</a></li><li><a href="https://tool.lu/regex/" target="_blank" rel="noopener">https://tool.lu/regex/</a></li><li><a href="http://tool.chinaz.com/regex/" target="_blank" rel="noopener">http://tool.chinaz.com/regex/</a></li></ul><hr><h2 id="更多"><a class="markdownIt-Anchor" href="#更多"></a> 更多</h2><ol><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener">正则对象在线文档</a></li><li><a href="https://juejin.im/post/5b2a186cf265da596d04a648" target="_blank" rel="noopener">ES9支持正则表达式反向断言</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;正则表达式 (Regular Expression) 语言由两种基本字符类型组成：原义（正常）文本字符和元字符。元字符使正则表达式具有处理能力。所谓元字符就是指那些在正则表达式中具有特殊意义的专用字符。&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="https://me.chjiyun.com/categories/JavaScript/"/>
    
      <category term="RegExp" scheme="https://me.chjiyun.com/categories/JavaScript/RegExp/"/>
    
    
      <category term="RegExp" scheme="https://me.chjiyun.com/tags/RegExp/"/>
    
  </entry>
  
  <entry>
    <title>centos7下安装与配置nginx</title>
    <link href="https://me.chjiyun.com/2017/11/22/centos7%E4%B8%8B%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AEnginx/"/>
    <id>https://me.chjiyun.com/2017/11/22/centos7下安装与配置nginx/</id>
    <published>2017-11-22T04:35:34.000Z</published>
    <updated>2017-11-25T07:49:13.964Z</updated>
    
    <content type="html"><![CDATA[<p>Nginx(engine x) 是一个高性能的 HTTP 和反向代理服务器，也是一个 IMAP/POP3/SMTP 服务器，与 Apache、lighttpd相比，nginx 占用内存少，稳定性高，它最常的用途是提供反向代理服务。</p><a id="more"></a><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2><p>yum 源不提供 nginx 的安装，可以通过切换 yum 源的方法获取安装，或者手动下载安装包，以下操作都需要root权限。</p><p>安装 nginx 前需要三个库（nginx 中 gzip 模块需要 zlib 库，rewrite 模块需要 pcre 库，ssl 功能需要 openssl 库），将目录切换到<code>/usr/local</code>。以下依赖库版本号可选择最新的。</p><p>安装 PCRE 库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.41.tar.gz</span><br><span class="line">tar -zxvf pcre-8.41.tar.gz</span><br><span class="line">cd pcre-8.41</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>安装 zlib 库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/ </span><br><span class="line">wget http://zlib.net/zlib-1.2.11.tar.gz</span><br><span class="line">tar -zxvf zlib-1.2.11.tar.gz</span><br><span class="line">cd zlib-1.2.11</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>安装 ssl</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">wget http://www.openssl.org/source/openssl-1.1.0g.tar.gz</span><br><span class="line">tar -zxvf openssl-1.1.0g.tar.gz</span><br><span class="line">./config</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>安装 nginx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">wget http://nginx.org/download/nginx-1.12.2.tar.gz</span><br><span class="line">tar -zxvf nginx-1.12.2.tar.gz</span><br><span class="line">cd nginx-1.12.2  </span><br><span class="line">./configure --prefix=/usr/local/nginx </span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>注意：configure 后面可带编译参数，要将上面三个库编译到 nginx 模块中,并且让 nginx 支持 https，还需带这些参数（跟在上面的 prefix 后面就行，以空格隔开）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--with-http_stub_status_module</span><br><span class="line">--with-http_ssl_module</span><br><span class="line">--with-pcre=/usr/local/pcre-8.41</span><br><span class="line">--with-zlib=/usr/local/zlib-1.2.11</span><br><span class="line">--with-openssl=/usr/local/openssl-1.1.0g</span><br></pre></td></tr></table></figure><p>安装完成后可输入<code>/usr/local/nginx/sbin/nginx -V</code>查看 configure 参数有哪些。这时候也可以通过输入<code>/usr/local/nginx/sbin/nginx</code>启动 nginx，浏览器输入虚拟机ip，如果出现nginx欢迎页则说明 nginx 安装并运行成功。这时也可以在centos里测试<code>curl --head http://localhost</code>，其它命令如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/sbin/nginx -s reload   #重启</span><br><span class="line">/usr/local/nginx/sbin/nginx -s stop     #停止</span><br><span class="line">/usr/local/nginx/sbin/nginx -t          #测试配置文件</span><br><span class="line">/usr/local/nginx/sbin/nginx -v          #打印版本号</span><br></pre></td></tr></table></figure><p><strong>Cautions</strong>：firewall 防火墙可能没有开放80端口和 http 服务，从而导致浏览器不能访问 web。可用命令查看防火墙允许的端口和服务（不加<code>--permanent</code>参数的话重启防火墙之后就会失效）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --list-services</span><br><span class="line">firewall-cmd --permanent --list-ports</span><br></pre></td></tr></table></figure><p>如果没有上面所说的端口和服务，那就输入下面的命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-service=http</span><br><span class="line">firewall-cmd --permanent --add-port=80/tcp</span><br></pre></td></tr></table></figure><h2 id="加入系统服务"><a class="markdownIt-Anchor" href="#加入系统服务"></a> 加入系统服务</h2><p>创建 nginx 启动命令脚本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/init.d/nginx</span><br></pre></td></tr></table></figure><p>粘贴以下内容, 注意修改 PATH 和 NAME 字段, 匹配自己的安装路径</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># nginx Startup script for the Nginx HTTP Server</span><br><span class="line"># it is v.0.0.2 version.</span><br><span class="line"># chkconfig: - 85 15</span><br><span class="line"># description: Nginx is a high-performance web and proxy server.</span><br><span class="line">#              It has a lot of features, but it&apos;s not for everyone.</span><br><span class="line"># processname: nginx</span><br><span class="line"># pidfile: /var/run/nginx.pid</span><br><span class="line"># config: /usr/local/nginx/conf/nginx.conf</span><br><span class="line">nginxd=/usr/local/nginx/sbin/nginx</span><br><span class="line">nginx_config=/usr/local/nginx/conf/nginx.conf</span><br><span class="line">nginx_pid=/var/run/nginx.pid</span><br><span class="line">RETVAL=0</span><br><span class="line">prog=&quot;nginx&quot;</span><br><span class="line"># Source function library.</span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"># Source networking configuration.</span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"># Check that networking is up.</span><br><span class="line">[ $&#123;NETWORKING&#125; = &quot;no&quot; ] &amp;&amp; exit 0</span><br><span class="line">[ -x $nginxd ] || exit 0</span><br><span class="line"># Start nginx daemons functions.</span><br><span class="line">start() &#123;</span><br><span class="line">if [ -e $nginx_pid ];then</span><br><span class="line">   echo &quot;nginx already running....&quot;</span><br><span class="line">   exit 1</span><br><span class="line">fi</span><br><span class="line">   echo -n $&quot;Starting $prog: &quot;</span><br><span class="line">   daemon $nginxd -c $&#123;nginx_config&#125;</span><br><span class="line">   RETVAL=$?</span><br><span class="line">   echo</span><br><span class="line">   [ $RETVAL = 0 ] &amp;&amp; touch /var/lock/subsys/nginx</span><br><span class="line">   return $RETVAL</span><br><span class="line">&#125;</span><br><span class="line"># Stop nginx daemons functions.</span><br><span class="line">stop() &#123;</span><br><span class="line">        echo -n $&quot;Stopping $prog: &quot;</span><br><span class="line">        killproc $nginxd</span><br><span class="line">        RETVAL=$?</span><br><span class="line">        echo</span><br><span class="line">        [ $RETVAL = 0 ] &amp;&amp; rm -f /var/lock/subsys/nginx /var/run/nginx.pid</span><br><span class="line">&#125;</span><br><span class="line"># reload nginx service functions.</span><br><span class="line">reload() &#123;</span><br><span class="line">    echo -n $&quot;Reloading $prog: &quot;</span><br><span class="line">    #kill -HUP `cat $&#123;nginx_pid&#125;`</span><br><span class="line">    killproc $nginxd -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    echo</span><br><span class="line">&#125;</span><br><span class="line"># See how we were called.</span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">start)</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">stop)</span><br><span class="line">        stop</span><br><span class="line">        ;;</span><br><span class="line">reload)</span><br><span class="line">        reload</span><br><span class="line">        ;;</span><br><span class="line">restart)</span><br><span class="line">        stop</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">status)</span><br><span class="line">        status $prog</span><br><span class="line">        RETVAL=$?</span><br><span class="line">        ;;</span><br><span class="line">*)</span><br><span class="line">        echo $&quot;Usage: $prog &#123;start|stop|restart|reload|status|help&#125;&quot;</span><br><span class="line">        exit 1</span><br><span class="line">esac</span><br><span class="line">exit $RETVAL</span><br></pre></td></tr></table></figure><p>设置执行权限</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a+x /etc/init.d/nginx</span><br></pre></td></tr></table></figure><p>添加到 chkconfig 管理列表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add /etc/init.d/nginx</span><br></pre></td></tr></table></figure><p>加完这个之后，就可以使用 service 对 nginx 进行启动、重启等操作了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service nginx start</span><br><span class="line">service nginx reload</span><br><span class="line">service nginx stop</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx.service</span><br><span class="line">systemctl stop nginx.service</span><br><span class="line">systemctl reload nginx.service</span><br></pre></td></tr></table></figure><p>设置开机自启</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig nginx on</span><br></pre></td></tr></table></figure><p><code>chkconfig --list nginx</code>显示 nginx 服务在不同运行级的状态</p><blockquote><p>等级0表示：表示关机<br>等级1表示：单用户模式<br>等级2表示：无网络连接的多用户命令行模式<br>等级3表示：有网络连接的多用户命令行模式<br>等级4表示：不可用<br>等级5表示：带图形界面的多用户模式<br>等级6表示：重新启动</p></blockquote><p>我们也可以把 nginx 服务从 chkconfig 列表中删除</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --del nginx</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Nginx(engine x) 是一个高性能的 HTTP 和反向代理服务器，也是一个 IMAP/POP3/SMTP 服务器，与 Apache、lighttpd相比，nginx 占用内存少，稳定性高，它最常的用途是提供反向代理服务。&lt;/p&gt;
    
    </summary>
    
      <category term="nginx" scheme="https://me.chjiyun.com/categories/nginx/"/>
    
    
      <category term="centos" scheme="https://me.chjiyun.com/tags/centos/"/>
    
      <category term="nginx" scheme="https://me.chjiyun.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>vagrant搭建开发环境</title>
    <link href="https://me.chjiyun.com/2017/11/21/vagrant%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    <id>https://me.chjiyun.com/2017/11/21/vagrant搭建开发环境/</id>
    <published>2017-11-21T04:13:34.000Z</published>
    <updated>2017-11-25T07:55:04.834Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Vagrant 是一个基于 Ruby 的工具，用于创建和部署虚拟化开发环境。它使用 Oracle 的开源 VirtualBox 虚拟化系统，使用 Chef 创建自动化虚拟环境。它底层支持 VirtualBox、VMware 甚至 AWS 作为虚拟机系统。</p></blockquote><p><img src="https://i.loli.net/2017/11/21/5a13f8ca3fec9.png" alt="17_11_21_01.png"></p><a id="more"></a><p>安装环境和工具：windows7 x64、迅雷、cmder</p><h2 id="安装-virtualbox"><a class="markdownIt-Anchor" href="#安装-virtualbox"></a> 安装 VirtualBox</h2><p>直接去<a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener">官网</a>下载最新的 virtualbox，安装一路点确定或yes就行。</p><h2 id="安装-vagrant"><a class="markdownIt-Anchor" href="#安装-vagrant"></a> 安装 Vagrant</h2><p>建议直接去<a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="noopener">官网</a>下载最新的 vagrant，安装一路点确定或yes就行，安装后为了写入环境变量需要重启电脑。</p><h2 id="配置-vagrant"><a class="markdownIt-Anchor" href="#配置-vagrant"></a> 配置 Vagrant</h2><p>这里要注意了，稍不注意就可能报错或者没反应。</p><h3 id="box-下载"><a class="markdownIt-Anchor" href="#box-下载"></a> box 下载</h3><p>在 vagrant 的世界里，box 相当于操作系统，比如 centos、ubuntu、debian 等，<a href="http://www.vagrantbox.es/" target="_blank" rel="noopener">去这里下载</a>，或者用别人打包好的 box 也行。可以用迅雷下载，有人说用迅雷会掉包什么的，反正我这里没什么问题，速度挺快的，放心下吧。</p><h3 id="box-安装"><a class="markdownIt-Anchor" href="#box-安装"></a> box 安装</h3><p>新建一个文件夹作为工作目录，我在H盘新建了一个<code>/centos7</code>。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd H:\centos7</span><br></pre></td></tr></table></figure><p>在当前工作目录下输入下列命令，<code>vagrant init</code>之后会在工作目录下生成一个<code>Vagrantfile</code>文件，这是启动虚机的配置文件，不作更改也是可以启动系统的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add &#123;title&#125; &#123;url&#125;</span><br><span class="line">vagrant init &#123;title&#125;</span><br><span class="line">vagrant up</span><br></pre></td></tr></table></figure><p><code>vagrant box add</code>是添加 box 到 vagrant 中的命令，box存放目录一般在<code>C:\Users\chjiyun\.vagrant.d\boxes</code>，title 自己命名就行，我设置的是 <strong>centos7</strong>，url是本地 <strong>box</strong> 的路径。</p><p>我是这样安装的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add centos7 C:\Users\chjiyun\Downloads\centos-7.0-x86_64.box</span><br><span class="line">vagrant init centos7</span><br><span class="line">vagrant up --provider virtualbox</span><br></pre></td></tr></table></figure><p>注意：输入<code>vagrant up</code>要是没反应，就带<code>--provider virtualbox</code>参数，我就是在那里卡了好久，光标一直闪就是没反应。启动系统成功以后可以不用带哪个参数了。</p><p>启动成功后是这样的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">H:\centos7</span><br><span class="line">$ vagrant reload</span><br><span class="line">==&gt; default: Attempting graceful shutdown of VM...</span><br><span class="line">==&gt; default: Clearing any previously set forwarded ports...</span><br><span class="line">==&gt; default: Clearing any previously set network interfaces...</span><br><span class="line">==&gt; default: Preparing network interfaces based on configuration...</span><br><span class="line">    default: Adapter 1: nat</span><br><span class="line">    default: Adapter 2: hostonly</span><br><span class="line">==&gt; default: You are trying to forward to privileged ports (ports &lt;= 1024). Most</span><br><span class="line">==&gt; default: operating systems restrict this to only privileged process (typically</span><br><span class="line">==&gt; default: processes running as an administrative user). This is a warning in case</span><br><span class="line">==&gt; default: the port forwarding doesn&apos;t work. If any problems occur, please try a</span><br><span class="line">==&gt; default: port higher than 1024.</span><br><span class="line">==&gt; default: Forwarding ports...</span><br><span class="line">    default: 80 (guest) =&gt; 80 (host) (adapter 1)</span><br><span class="line">    default: 22 (guest) =&gt; 2222 (host) (adapter 1)</span><br><span class="line">==&gt; default: Running &apos;pre-boot&apos; VM customizations...</span><br><span class="line">==&gt; default: Booting VM...</span><br><span class="line">==&gt; default: Waiting for machine to boot. This may take a few minutes...</span><br><span class="line">    default: SSH address: 127.0.0.1:2222</span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">==&gt; default: Machine booted and ready!</span><br><span class="line">==&gt; default: Checking for guest additions in VM...</span><br><span class="line">    default: The guest additions on this VM do not match the installed version of</span><br><span class="line">    default: VirtualBox! In most cases this is fine, but in rare cases it can</span><br><span class="line">    default: prevent things such as shared folders from working properly. If you see</span><br><span class="line">    default: shared folder errors, please make sure the guest additions within the</span><br><span class="line">    default: virtual machine match the version of VirtualBox you have installed on</span><br><span class="line">    default: your host and reload your VM.</span><br><span class="line">    default:</span><br><span class="line">    default: Guest Additions Version: 4.3.28</span><br><span class="line">    default: VirtualBox Version: 5.2</span><br><span class="line">==&gt; default: Configuring and enabling network interfaces...</span><br><span class="line">    default: SSH address: 127.0.0.1:2222</span><br><span class="line">    default: SSH username: vagrant</span><br><span class="line">    default: SSH auth method: private key</span><br><span class="line">==&gt; default: Mounting shared folders...</span><br><span class="line">    default: /vagrant =&gt; H:/centos7</span><br><span class="line">==&gt; default: Machine already provisioned. Run `vagrant provision` or use the `--provision`</span><br><span class="line">==&gt; default: flag to force provisioning. Provisioners marked to run always will still run.</span><br></pre></td></tr></table></figure><h3 id="登录虚机"><a class="markdownIt-Anchor" href="#登录虚机"></a> 登录虚机</h3><p>经过上面的安装，没有报错后，虚拟机就安装成功了，现在开始登录虚拟机。可以使用 xshell，我这里用的 cmder，内置 shell 命令。</p><p>直接输入<code>vagrant ssh</code>进行登录，使用 xshell 的话，得输入ip和端口号，观察上面启动系统后的提示，看虚机22端口映射的是宿主机的那个端口。很明显我的是2222端口，也就是<code>127.0.0.1:2222</code>，用户名与密码都是 vagrant。</p><h2 id="vagrantfile"><a class="markdownIt-Anchor" href="#vagrantfile"></a> vagrantfile</h2><p>我的配置是这样的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Vagrant.configure(&quot;2&quot;) do |config|</span><br><span class="line">  config.vm.box = &quot;centos7&quot;</span><br><span class="line">  config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 80</span><br><span class="line">  config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;</span><br><span class="line">  # config.vm.network &quot;public_network&quot;</span><br><span class="line">  config.vm.synced_folder &quot;./&quot;, &quot;/vagrant&quot;</span><br><span class="line">  config.vm.provider &quot;virtualbox&quot; do |vb|</span><br><span class="line">    vb.memory = &quot;1024&quot;</span><br><span class="line">  end</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>网络连接有三种方式：host-only(私有网络)、Bridge(公有网络)、端口映射。</p><ul><li>端口映射：就是 host 机器上80端口的访问请求forward到虚拟机的80端口的服务上。</li><li>私有网络：这种方式是只允许主机访问虚拟机。如果多个虚拟机设定在同一个网段，那么几个虚拟机之间也可以互相访问。</li><li>公有网络：这种网络配置方式，方便团队开发，别人也可以访问你的虚拟机。当然，你和你的虚拟机必须在同一个网段中。</li></ul><p>共享目录我设置的是工作目录与 centos 下的<code>/vagrant</code>同步。</p><p>更改配置后记得<code>exit</code>退出登录，再<code>vagrant relaod</code>使配置生效。关闭虚机时记得<code>vagrant status</code>查看是否已经 poweroff，避免给以后使用带来一些问题。</p><p>还有很多配置，这里先不说了。待续…</p><h2 id="vagrant命令"><a class="markdownIt-Anchor" href="#vagrant命令"></a> vagrant命令</h2><table><thead><tr><th style="text-align:center">命令</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:center">vagrant box add</td><td style="text-align:left">添加 box</td></tr><tr><td style="text-align:center">vagrant box list</td><td style="text-align:left">显示当前已经添加的box列表</td></tr><tr><td style="text-align:center">vagrant init</td><td style="text-align:left">初始化 box 的操作，会生成 vagrant 的配置文件 Vagrantfile</td></tr><tr><td style="text-align:center">vagrant up</td><td style="text-align:left">启动本地环境</td></tr><tr><td style="text-align:center">vagrant status</td><td style="text-align:left">获取当前虚拟机的状态</td></tr><tr><td style="text-align:center">vagrant ssh</td><td style="text-align:left">登录本地环境所在虚拟机</td></tr><tr><td style="text-align:center">vagrant halt</td><td style="text-align:left">关闭本地环境</td></tr><tr><td style="text-align:center">vagrant suspend</td><td style="text-align:left">暂停本地环境</td></tr><tr><td style="text-align:center">vagrant resume</td><td style="text-align:left">恢复本地环境</td></tr><tr><td style="text-align:center">vagrant reload</td><td style="text-align:left">修改了 Vagrantfile 后，使之生效（相当于先 halt，再 up）</td></tr><tr><td style="text-align:center">vagrant destroy</td><td style="text-align:left">彻底移除本地环境</td></tr><tr><td style="text-align:center">vagrant box remove</td><td style="text-align:left">删除相应的 box</td></tr><tr><td style="text-align:center">vagrant package</td><td style="text-align:left">打包命令，可以把当前的运行的虚拟机环境进行打包</td></tr><tr><td style="text-align:center">vagrant plugin</td><td style="text-align:left">用于安装卸载插件</td></tr><tr><td style="text-align:center">vagrant global-status</td><td style="text-align:left">显示当前用户 Vagrant 的所有环境状态</td></tr></tbody></table><hr><p>关于网络的详细配置可参考<a href="http://blog.csdn.net/ciweieric/article/details/52026826" target="_blank" rel="noopener">http://blog.csdn.net/ciweieric/article/details/52026826</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;Vagrant 是一个基于 Ruby 的工具，用于创建和部署虚拟化开发环境。它使用 Oracle 的开源 VirtualBox 虚拟化系统，使用 Chef 创建自动化虚拟环境。它底层支持 VirtualBox、VMware 甚至 AWS 作为虚拟机系统。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2017/11/21/5a13f8ca3fec9.png&quot; alt=&quot;17_11_21_01.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="vagrant" scheme="https://me.chjiyun.com/categories/vagrant/"/>
    
    
      <category term="centos" scheme="https://me.chjiyun.com/tags/centos/"/>
    
      <category term="vagrant" scheme="https://me.chjiyun.com/tags/vagrant/"/>
    
      <category term="virtualbox" scheme="https://me.chjiyun.com/tags/virtualbox/"/>
    
  </entry>
  
  <entry>
    <title>windows命令行利器-Cmder</title>
    <link href="https://me.chjiyun.com/2017/11/15/windows%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%88%A9%E5%99%A8-Cmder/"/>
    <id>https://me.chjiyun.com/2017/11/15/windows命令行利器-Cmder/</id>
    <published>2017-11-15T07:14:27.000Z</published>
    <updated>2018-11-11T12:54:30.658Z</updated>
    
    <content type="html"><![CDATA[<p>Cmder 是一个软件包，它被创建出来替代没有漂亮的控制台模拟器的Windows上。它也是一个增强型的命令行工具，不仅可以使用cmd下的所有命令，更厉害的是还可以使用shell命令和Git命令。</p><p><img src="https://i.loli.net/2017/11/15/5a0c01f66c587.png" alt="17_11_15_01.png"></p><a id="more"></a><h2 id="install"><a class="markdownIt-Anchor" href="#install"></a> Install</h2><p>下载地址：<a href="http://cmder.net/" target="_blank" rel="noopener">戳这里</a></p><p>Cmder 有两个版本：mini和full，唯一的差别在于full版有内嵌msysgit工具，这是Git for Windows的标准配备。</p><h2 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h2><h3 id="修改命令提示符"><a class="markdownIt-Anchor" href="#修改命令提示符"></a> 修改命令提示符</h3><p>进入解压后的cmder的目录，进入vendor,打开<code>clink.lua</code>文件，第46行起修改lambda的值为 “$”。（1.3版本之后）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if env == nil then</span><br><span class="line">      lambda = &quot;$&quot;</span><br><span class="line">  else</span><br><span class="line">      lambda = &quot;(&quot;..env..&quot;) $&quot;</span><br><span class="line">  end</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/11/15/5a0c01f5f3828.png" alt="17_11_15_02.png" title="修改后效果图"></p><h3 id="添加环境变量"><a class="markdownIt-Anchor" href="#添加环境变量"></a> 添加环境变量</h3><p>要想使用<code>Win+R</code>快速调用cmder，就得添加环境变量（这一步很重要）。<br>注意：添加路径（cmder的路径）前要添加分号</p><p><img src="https://i.loli.net/2017/11/15/5a0c01f63da7d.png" alt="17_11_15_04.png"></p><p><img src="https://i.loli.net/2017/11/15/5a0c01f60cfdf.png" alt="17_11_15_05.png"></p><h3 id="添加至右键菜单"><a class="markdownIt-Anchor" href="#添加至右键菜单"></a> 添加至右键菜单</h3><p>进入cmder的根目录（或任意目录），执行下面的命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmder /register all</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/11/15/5a0c01f5f1d77.png" alt="17_11_15_03.png" title="修改后效果图"></p><h3 id="解决ls中文乱码"><a class="markdownIt-Anchor" href="#解决ls中文乱码"></a> 解决ls中文乱码</h3><p>点击cmder窗口右下角设置图标 --&gt; Settings，或者按下快捷键：<code>Win+ Alt+ P</code>。选择 Environment 项，添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set LC_ALL=zh_CN.UTF8</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/11/15/5a0c01f65d670.png" alt="17_11_15_06.png"></p><h2 id="新建窗口"><a class="markdownIt-Anchor" href="#新建窗口"></a> 新建窗口</h2><p>可以这样设置新开窗口的位置：</p><p><img src="https://i.loli.net/2017/11/15/5a0c01f66e546.png" alt="17_11_15_07.png"></p><p><img src="https://ooo.0o0.ooo/2017/11/15/5a0c01f65d695.png" alt="17_11_15_08.png"></p><h2 id="常用快捷键"><a class="markdownIt-Anchor" href="#常用快捷键"></a> 常用快捷键</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Ctrl + `：从任务栏进行全局召唤</span><br><span class="line">Ctrl + T ：建立新标签页</span><br><span class="line">Ctrl + W ：关闭标签页</span><br><span class="line">Ctrl + Tab ：切换标签页</span><br><span class="line">Ctrl+ 1 ：切换到第一个标签页，Ctrl+ n同理</span><br><span class="line">Win + Alt + p ：首选项（或右键单击标题栏）</span><br><span class="line">Shift + Alt + number ：快速新标签：</span><br><span class="line">  1. CMD</span><br><span class="line">  2. PowerShell</span><br><span class="line">Alt + Enter ：全屏</span><br><span class="line">Shift + mouse ：从缓冲区中选择并复制文本</span><br><span class="line">Right click / Ctrl + Shift + v ：粘贴文本</span><br></pre></td></tr></table></figure><p>另外还可以添加自定义命令…(后续)</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Cmder 是一个软件包，它被创建出来替代没有漂亮的控制台模拟器的Windows上。它也是一个增强型的命令行工具，不仅可以使用cmd下的所有命令，更厉害的是还可以使用shell命令和Git命令。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2017/11/15/5a0c01f66c587.png&quot; alt=&quot;17_11_15_01.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="教程" scheme="https://me.chjiyun.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="Cmder" scheme="https://me.chjiyun.com/tags/Cmder/"/>
    
  </entry>
  
  <entry>
    <title>Angular4.x项目如何实现跨域</title>
    <link href="https://me.chjiyun.com/2017/11/06/Angular4-x%E9%A1%B9%E7%9B%AE%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%B7%A8%E5%9F%9F/"/>
    <id>https://me.chjiyun.com/2017/11/06/Angular4-x项目如何实现跨域/</id>
    <published>2017-11-06T04:12:49.000Z</published>
    <updated>2018-03-18T04:00:10.795Z</updated>
    
    <content type="html"><![CDATA[<h2 id="跨域"><a class="markdownIt-Anchor" href="#跨域"></a> 跨域</h2><p>跨域，指的是浏览器不能执行其他网站的脚本。它是由浏览器的同源策略造成的，是浏览器对 javascript 施加的安全限制。</p><blockquote><p>浏览器的同源策略会导致跨域，这里同源策略又分为以下两种：</p><ol><li>DOM 同源策略：禁止对不同源页面 DOM 进行操作。这里主要场景是 iframe 跨域的情况，不同域名的 iframe 是限制互相访问的。</li><li>XmlHttpRequest 同源策略：禁止使用 XHR 对象向不同源的服务器地址发起 HTTP 请求。</li></ol></blockquote><a id="more"></a><p>什么情况下跨域了？<br>只要协议、域名、端口有任何一个不同，都被当作是不同的域，之间的请求就是跨域操作。举个例子：<br><code>http://www.example.com(:80)/</code>，调用<code>http://www.example.com:8080/</code>（端口号不同）<br><code>http://www.example.com(:80)/</code>，调用<code>http://api.example.com/</code>（子域名不同）<br><code>http://www.example.com(:80)/</code>，调用<code>https://www.example.com/</code>（协议不同）</p><p>上面三种都存在跨域问题，想必有些人肯定会困惑，浏览器为什么会有跨域的限制呢？有经验的人肯定知道，跨域限制主要是为了安全考虑。</p><h2 id="解决方式"><a class="markdownIt-Anchor" href="#解决方式"></a> 解决方式</h2><h3 id="jsonp"><a class="markdownIt-Anchor" href="#jsonp"></a> JSONP</h3><p>基本原理就是通过动态创建 <strong>script</strong> 标签,因为 <strong>script</strong> 没有跨域限制。使用方法就不赘述了，但是要注意 JSONP 只支持 GET 请求，不支持 POST 请求。</p><h3 id="cors"><a class="markdownIt-Anchor" href="#cors"></a> CORS</h3><p>实现 <strong>CORS</strong> 通信的关键是服务器，因为不是太懂服务端，这里只说关键设置，需要在 response header 中设置如下两个字段:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">header(&apos;Access-Control-Allow-Origin: *&apos;); //允许所有来源访问，或者换成指定地址</span><br><span class="line">header(&apos;Access-Control-Allow-Credentials: true&apos;)</span><br></pre></td></tr></table></figure><p>我在 nginx 上这样设置的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">  add_header &apos;Access-Control-Allow-Origin&apos; &apos;*&apos;;</span><br><span class="line">  add_header &apos;Access-Control-Allow-Credentials&apos; &apos;true&apos;;</span><br><span class="line">  add_header &apos;Access-Control-Allow-Methods&apos; &apos;GET, POST, OPTIONS&apos;;</span><br><span class="line">  index  index.html index.htm;</span><br><span class="line">  root  www;</span><br><span class="line">  try_files $uri $uri/ /index.html =404;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>具体教程参见：<a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">跨域资源共享CORS详解</a><br>Cors在nginx上的设置：<a href="https://enable-cors.org/server_nginx.html" target="_blank" rel="noopener">CORS on Nginx</a></p><h3 id="代理"><a class="markdownIt-Anchor" href="#代理"></a> 代理</h3><p>这里分为两种环境：开发环境和生产部署环境。</p><p>本地测试一般都属于开发环境，如果用了Angular-cli搭建项目，跨域就简单了，只需两步：</p><ol><li><p>在项目根目录新建一个文件<code>proxy.conf.json</code>，添加如下内容</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"/v2"</span>: &#123;</span><br><span class="line">    <span class="attr">"target"</span>: <span class="string">"https://api.douban.com"</span>,</span><br><span class="line">    <span class="attr">"secure"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"changeOrigin"</span>: <span class="literal">true</span>  //记得加这句</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改同目录下的<code>package.json</code>的 scripts 内容</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"ng serve --proxy-config proxy.conf.json --open"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>然后向这个 url 发起 get 请求<code>/v2/movie/top250?count=10</code>，这样就能轻松实现跨域了。</p><p><img src="https://i.loli.net/2017/11/06/5a0009897c9bc.png" alt="17_11_6_01.png"></p><p>但是项目要部署了怎么办？上面这个方法还管用吗？答案是当然不能，因为有些设置没有生效到服务器。</p><blockquote><p>浏览器有跨域限制，但是服务器不存在跨域问题，所以可以由服务器请求所要域的资源再返回给客户端。</p></blockquote><p>这里不得不说说 nginx 的反向代理，利用 nginx 反向代理实现跨域，是最简单的跨域方式，支持所有浏览器，并且不会影响服务器性能。这是一种对于任何项目都通用的方法！<a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">nginx下载链接</a></p><p>下面是我写的一个简单的 location 匹配规则。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">location ^~ /v2/movie/ &#123;</span><br><span class="line">  rewrite ^/v2/movie/(.*)$ /v2/movie/$1 break;</span><br><span class="line">  proxy_pass https://api.douban.com;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>假设前端请求 URL 为：<code>/v2/movie/top250?count=10</code>，location会匹配以<code>/v2/movie/</code>为开头的地址，rewrite 重写 url，<code>$1</code>引用的是括号里的内容<code>(.*)</code>，last 一般写在 server 和 if 中，而 break 一般使用在 location 中。proxy_pass 转发请求到真实服务器，其实真实的请求url为：<code>https://api.douban.com/v2/movie/top250?count=10</code>。</p><p><img src="https://i.loli.net/2017/11/16/5a0d68a123002.png" alt="17_11_6_02.png"></p><p>常用正则</p><blockquote><p>. ： 匹配除换行符以外的任意字符<br>? ： 重复0次或1次<br>+ ： 重复1次或更多次<br>* ： 重复0次或更多次<br>\d ： 匹配数字<br>^ ： 匹配字符串的开始<br>$ ： 匹配字符串的结束<br>{n} ： 重复n次<br>{n,} ： 重复n次或更多次<br>[c] ： 匹配单个字符c<br>[a-z] ： 匹配a-z小写字母的任意一个</p></blockquote><p><a href="http://me.chjiyun.com/2017/11/27/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">更多正则基础请点这里</a></p><h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><ul><li><p>如果你要请求的是其他公司开发提供的接口，例如上面的豆瓣api，那么 <strong>jsonp</strong> 和 <strong>nginx代理</strong> 是不错的方案；</p></li><li><p>要是自己公司开发的接口，例如：<code>http(s)://api.example.com/*</code>，那么 <strong>CORS</strong> 和 <strong>nginx代理</strong> 是最合适的方案，一般的项目采用前者，大型网站可能要做负载均衡，Apache 结合 nginx 一起用；</p></li><li><p>其实项目中这三种方法可以结合使用，从而可以发挥出更多的功能。</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;跨域&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#跨域&quot;&gt;&lt;/a&gt; 跨域&lt;/h2&gt;&lt;p&gt;跨域，指的是浏览器不能执行其他网站的脚本。它是由浏览器的同源策略造成的，是浏览器对 javascript 施加的安全限制。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;浏览器的同源策略会导致跨域，这里同源策略又分为以下两种：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;DOM 同源策略：禁止对不同源页面 DOM 进行操作。这里主要场景是 iframe 跨域的情况，不同域名的 iframe 是限制互相访问的。&lt;/li&gt;&lt;li&gt;XmlHttpRequest 同源策略：禁止使用 XHR 对象向不同源的服务器地址发起 HTTP 请求。&lt;/li&gt;&lt;/ol&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Angular" scheme="https://me.chjiyun.com/categories/Angular/"/>
    
    
      <category term="Angular跨域" scheme="https://me.chjiyun.com/tags/Angular%E8%B7%A8%E5%9F%9F/"/>
    
  </entry>
  
  <entry>
    <title>如何快速搭建Angular项目</title>
    <link href="https://me.chjiyun.com/2017/10/23/%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BAAngular%E9%A1%B9%E7%9B%AE/"/>
    <id>https://me.chjiyun.com/2017/10/23/如何快速搭建Angular项目/</id>
    <published>2017-10-23T08:49:12.000Z</published>
    <updated>2017-11-08T15:08:15.690Z</updated>
    
    <content type="html"><![CDATA[<p>好的工具能帮你省去繁琐的环境配置时间，让你专注于开发的细节。所以这里我推荐使用<code>Angular-cli</code>，相比于<code>vue-cli</code>，搭建更加简单快捷。</p><p>Angular CLI是一个命令行界面工具，它可以创建项目、添加文件以及执行一大堆开发任务，比如测试、打包和发布。</p><p>本文主要讲解的是如何搭建并运行一个简单的Angular(4.x)应用。</p><a id="more"></a><h2 id="设置开发环境"><a class="markdownIt-Anchor" href="#设置开发环境"></a> 设置开发环境</h2><p>开始前请先确定安装了Node和npm。</p><blockquote><p>请先在命令行窗口中运行命令 node -v 和 npm -v， 确保你正在运行 node 6.9.x 和 npm 3.x.x 以上的版本。更老的版本可能会出现错误。</p></blockquote><p>然后全局安装Angular CLI</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @angular/cli</span><br></pre></td></tr></table></figure><h2 id="创建新项目"><a class="markdownIt-Anchor" href="#创建新项目"></a> 创建新项目</h2><p>接下来会新建一个文件夹，在合适的磁盘下右键单击，打开命令窗口，运行下列命令来生成一个初始化的新项目。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng new my-app</span><br></pre></td></tr></table></figure><p>完成上面两步说明一个简单的应用基本搭建完成了，是不是so easy，接下来启动服务器浏览你的应用。</p><h2 id="启动服务器"><a class="markdownIt-Anchor" href="#启动服务器"></a> 启动服务器</h2><p>进入项目目录，启动web服务器。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> my-app</span><br><span class="line">ng serve --open</span><br></pre></td></tr></table></figure><p><code>ng serve</code>命令不仅会启动服务器，还能监听本地文件的变化，当你修改这些文件时，应用会被重新构建，并自动刷新浏览器。<br>使用<code>--open</code>（或<code>-o</code>）参数可以自动打开浏览器并访问<code>http://localhost:4200/</code>。</p><h2 id="请注意"><a class="markdownIt-Anchor" href="#请注意"></a> 请注意</h2><ul><li><p>第三方库放在<code>assets</code>目录下，angular应用要引用时，请在项目根目录找到<code>angualr-cli.json</code>，如下，在<code>styles</code>里添加样式文件，<code>scripts</code>里添加脚本，地址是相对于<strong>localhost:4200根目录</strong>的路径，也就是<code>src/</code>。引用图片资源时地址要这样写：<code>/assets/images/**.jpg</code>。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&quot;apps&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      ...</span><br><span class="line">      &quot;styles&quot;: [</span><br><span class="line">        &quot;styles.css&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;scripts&quot;: [assets/venors/velocity.min.js]</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure></li><li><p>如果不想每次启动服务器都输入<code>--open</code>参数，可以修改<code>package.json</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"ng serve --open"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;好的工具能帮你省去繁琐的环境配置时间，让你专注于开发的细节。所以这里我推荐使用&lt;code&gt;Angular-cli&lt;/code&gt;，相比于&lt;code&gt;vue-cli&lt;/code&gt;，搭建更加简单快捷。&lt;/p&gt;&lt;p&gt;Angular CLI是一个命令行界面工具，它可以创建项目、添加文件以及执行一大堆开发任务，比如测试、打包和发布。&lt;/p&gt;&lt;p&gt;本文主要讲解的是如何搭建并运行一个简单的Angular(4.x)应用。&lt;/p&gt;
    
    </summary>
    
      <category term="Angular" scheme="https://me.chjiyun.com/categories/Angular/"/>
    
    
      <category term="Angular-cli" scheme="https://me.chjiyun.com/tags/Angular-cli/"/>
    
  </entry>
  
  <entry>
    <title>Array对象及原型</title>
    <link href="https://me.chjiyun.com/2017/09/18/Array%E5%AF%B9%E8%B1%A1%E5%8F%8A%E5%8E%9F%E5%9E%8B/"/>
    <id>https://me.chjiyun.com/2017/09/18/Array对象及原型/</id>
    <published>2017-09-18T15:54:28.000Z</published>
    <updated>2019-08-03T08:30:48.270Z</updated>
    
    <content type="html"><![CDATA[<p>JavaScript的 Array 对象是用于构造数组的全局对象，数组是类似于列表的高阶对象。本文将主要讲解 <code>Array.prototype</code> 下的方法</p><a id="more"></a><h2 id="fill"><a class="markdownIt-Anchor" href="#fill"></a> fill</h2><p>用一个固定值填充一个数组中从起始索引到终止索引内的全部元素，不包括终止索引。</p><p>语法：<br>arr.fill(value[, start[, end]])<br><code>value</code><br>用来填充数组元素的值。<br><code>start</code><br>起始索引，默认值为 0。<br><code>end</code><br>终止索引，默认值为 this.length。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">5</span>).fill(<span class="number">1</span>); <span class="comment">// [1, 1, 1, 1,1]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="comment">// fill with 0 from position 2 until position 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.fill(<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line"><span class="comment">// expected output: [1, 2, 0, 0]</span></span><br></pre></td></tr></table></figure><h2 id="splice"><a class="markdownIt-Anchor" href="#splice"></a> splice</h2><p>可删除或添加新的元素来修改原数组，返回被删除的元素组成的一个数组，如果没有删除元素，则返回空数组。</p><p>array.splice(start[, deleteCount[, item1[, item2[, …]]]])<br><code>start</code><br>指定修改的开始位置<br><code>deleteCount</code><br>要移除的数组元素的个数<br><code>item1, item2, ...</code><br>从start 位置开始，添加进数组的元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">arr.splice(<span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment">// arr: [1, 2, 0, 4]</span></span><br><span class="line"><span class="comment">// 被删除的元素: [3]</span></span><br></pre></td></tr></table></figure><h2 id="copywithin"><a class="markdownIt-Anchor" href="#copywithin"></a> copyWithin</h2><p>浅复制数组的一部分到同一数组中的另一个位置，并返回它，不会改变原数组的长度。<br>arr.copyWithin(target[, start[, end]])<br><code>target</code><br>复制到该位置的索引<br><code>start</code><br>可选，开始复制元素的起始位置<br><code>end</code><br>可选，开始复制元素的结束位置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">// [4, 2, 3, 4, 5]</span></span><br><span class="line">arr.copyWithin(<span class="number">-2</span>)</span><br><span class="line"><span class="comment">// [1, 2, 3, 1, 2]</span></span><br></pre></td></tr></table></figure><h2 id="some"><a class="markdownIt-Anchor" href="#some"></a> some</h2><p>测试是否至少有一个元素可以符合条件，也就是被提供的函数返回true。<code>some()</code> 为数组中的每一个元素执行一次 callback 函数，直到找到一个使得 callback 返回一个“真值”（即可转换为布尔值 true 的值）。如果找到了这样一个值，some() 将会立即返回 true，否则，都不符合条件，返回 false。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>].some(<span class="function"><span class="params">v</span> =&gt;</span> !v)</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="every"><a class="markdownIt-Anchor" href="#every"></a> every</h2><p>跟 some 不一样，every 检测一个数组内的所有元素是否都能通过某个指定函数的测试，并返回布尔值。如果某个元素使 callback 返回 false，则循环终止，every 立即返回false，否则，返回 true。</p><blockquote><p>注意：空数组情况下返回true。every 和数学中的&quot;所有&quot;类似，当所有的元素都符合条件才会返回true。正因如此，若传入一个空数组，无论如何都会返回 true。（这种情况属于无条件正确：正因为一个空集合没有元素，所以它其中的所有元素都符合给定的条件。)</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>].every(<span class="function"><span class="params">v</span> =&gt;</span> !v)</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="includes"><a class="markdownIt-Anchor" href="#includes"></a> includes</h2><p>用来判断一个数组是否包含一个指定的值，如果包含则返回 true，否则返回false。</p><blockquote><p>注意：对象数组不能使用includes方法来检测。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="literal">NaN</span>].includes(<span class="literal">NaN</span>); </span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="map"><a class="markdownIt-Anchor" href="#map"></a> map</h2><p>map 方法会循环遍历数组，对每一个元素进行函数式的处理。注意：原来数组不会发生变化，会返回一个新的数组。</p><p>比如有这样一个函数<code>f(x)=x*x</code>，用 map 实现如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"></span><br><span class="line">arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>运行结果：[1, 4, 9, 16, 25, 36, 49, 64, 81]</p><p>此功能完全可以自己封装一个函数来完成，但是不容易一眼就看出是函数作用于元素，也就是可读性不高。map()作为高阶函数，事实上它把运算规则抽象了，因此，我们不但可以<code>f(x)=x*x</code>，还可以计算任意复杂的函数。</p><p>此方法还可以转换数组元素类型：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line">arr.map(<span class="built_in">String</span>);</span><br></pre></td></tr></table></figure><p>运行结果: [“1”, “2”, “3”, “4”, “5”, “6”, “7”, “8”, “9”]</p><p>把字符串转化为数组：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.map.call(<span class="string">"String"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>运行结果：[“S”, “t”, “r”, “i”, “n”, “g”]</p><p>map 和 forEach 异同点：</p><ul><li>map 和 forEach 非常相似，都是用来遍历数组中的每一项，并不对原数组进行修改；</li><li>区别在于 map 支持 return 返回（返回的是进行修改后的原数组的克隆版本），而 forEach 不支持；</li><li>两者都支持第二个参数，这第二个参数的意思是把匿名回调函数中的 this 进行修改。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">key</span>: <span class="number">12</span> &#125;;</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * <span class="keyword">this</span>.key;</span><br><span class="line">&#125;, obj);</span><br></pre></td></tr></table></figure><p>运行结果：[12, 24, 36]</p><hr><h2 id="reduce"><a class="markdownIt-Anchor" href="#reduce"></a> reduce</h2><p>直接上代码，看看运行结果：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">sum = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">res, cur, index, self</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res, cur, index);</span><br><span class="line">  <span class="keyword">return</span> res + cur;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="number">3</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="number">6</span> <span class="number">4</span> <span class="number">3</span></span><br><span class="line"><span class="number">10</span> <span class="number">5</span> <span class="number">4</span></span><br><span class="line"><span class="number">15</span>  <span class="comment">// reduce回调函数返回值</span></span><br></pre></td></tr></table></figure><p><code>reduce</code>回调函数中有四个参数：</p><p>res: 第一项的值或者上一次叠加的结果值<br>cur: 当前会参与叠加的项<br>index：当前参与叠加项的索引<br>self: 数组本身</p><p>从这个例子可以看出<code>reduce</code>能实现累加运算，那么能进行累积运算吗，当然可以，这个自己下去试试就知道了。</p><p>给 reduce 参数添加第二个参数，通过打印我发现，<code>reduce</code>会遍历 5 次。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">sum = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">res, cur, index, self</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res, cur, index);</span><br><span class="line">  <span class="keyword">return</span> res + cur;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="number">3</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="number">6</span> <span class="number">4</span> <span class="number">3</span></span><br><span class="line"><span class="number">10</span> <span class="number">5</span> <span class="number">4</span></span><br><span class="line"><span class="number">15</span>  <span class="comment">// reduce回调函数返回值</span></span><br></pre></td></tr></table></figure><p>这第二个参数就是设置 res 的数据类型和初始值，设置为 0，就表示 res 的初始值为<code>number</code>类型，值为 0，因此，<code>reduce</code>的最终结果也会是<code>number</code>类型。</p><p>那么，如何计算一串字符串中每个字母出现的次数呢？</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"abcdaabce"</span>;</span><br><span class="line"></span><br><span class="line">str.split(<span class="string">""</span>).reduce(<span class="function"><span class="keyword">function</span>(<span class="params">res, cur</span>) </span>&#123;</span><br><span class="line">  res[cur] ? res[cur]++ : (res[cur] = <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;, &#123;&#125;);</span><br></pre></td></tr></table></figure><p>运行结果：{a: 3, b: 2, c: 2, d: 1, e: 1}</p><p>由于可以通过第二个参数设置叠加结果的类型和初始值，我们可以灵活的运用它来进行各种各样的类型转换，比如将数组按照一定规则转换为对象，也可以将一种形式的数组转换为另一种形式的数组。</p><p>这种特性使得<code>reduce</code>在实际开发中大有可为！但是需要注意点，在 IE9 以下的浏览器中，并不支持该方法！</p><p>应用：</p><ol><li><code>reduce</code>还可以去除字符串中的重复字符，类似于数组去重</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"abc12122adc"</span>;</span><br><span class="line"></span><br><span class="line">str.split(<span class="string">""</span>).reduce(<span class="function"><span class="keyword">function</span>(<span class="params">res, cur, i, self</span>) </span>&#123;</span><br><span class="line">  self.indexOf(cur) === i ? res.push(cur) : <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><ol start="2"><li>递归方法将多维数组转一维：</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [[<span class="number">5</span>, <span class="number">6</span>], <span class="number">7</span>], <span class="number">8</span>];</span><br><span class="line"><span class="keyword">const</span> flatten = <span class="function"><span class="params">arr</span> =&gt;</span></span><br><span class="line">  arr.reduce(</span><br><span class="line">    (res, cur) =&gt; res.concat(<span class="built_in">Array</span>.isArray(cur) ? flatten(cur) : cur),</span><br><span class="line">    []</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：ES9中将新增flat方法，flat()方法会递归到指定深度将所有子数组连接，并返回一个新数组。例：</span></span><br><span class="line">arr.flat(<span class="literal">Infinity</span>); <span class="comment">// [1,2,3,4,5,6,7,8,]</span></span><br></pre></td></tr></table></figure><ol start="3"><li>将树形<strong>json</strong>结构扁平化</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reduce 第二个参数为当前参与计算的项，也就是数组的某个元素 (Object)</span></span><br><span class="line"><span class="comment">// 参数里的 &#123; name &#125; 为es6中解构赋值的特性，下面的&#123; name &#125; 相当于 &#123; name: name &#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> data.reduce(</span><br><span class="line">    (arr, &#123; name, children = [] &#125;) =&gt; arr.concat([&#123; name &#125;], flatten(children)),</span><br><span class="line">    []</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Result:</span></span><br><span class="line">[</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Juery"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"LiLy"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Shyane"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Taylor"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Choy"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Fusion"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Simon"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Sunshine"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Meton"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">"Adele"</span> &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p><strong>Json:</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Juery"</span>,</span><br><span class="line">    <span class="attr">"children"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"LiLy"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Shyane"</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Taylor"</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Choy"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Fusion"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Simon"</span>,</span><br><span class="line">    <span class="attr">"children"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"Sunshine"</span>,</span><br><span class="line">        <span class="attr">"children"</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Meton"</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"Adele"</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><hr><h2 id="filter"><a class="markdownIt-Anchor" href="#filter"></a> filter</h2><p>顾名思义，它用于过滤某些元素，返回剩下的元素。和 map()有点类似，filter()也接收一个函数。和 map()不同的是，filter()把传入的函数依次作用于每个元素，然后根据返回值是 true 还是 false 决定保留还是丢弃该元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"i love you very very very much,do you love me?"</span>;</span><br><span class="line"></span><br><span class="line">s.slice(<span class="number">0</span>, <span class="number">-1</span>)</span><br><span class="line">  .split(<span class="regexp">/[\s\,]+/</span>)</span><br><span class="line">  .filter(<span class="function"><span class="keyword">function</span>(<span class="params">ele, index, self</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// slice去掉末尾'?'</span></span><br><span class="line">    <span class="keyword">return</span> self.indexOf(ele) === index;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>运行结果：[“i”, “love”, “you”, “very”, “much”, “do”, “me”]</p><p>ele: 当前遍历的数组元素<br>index：当前遍历元素的位置<br>self: 数组本身</p><p>由此可看出<code>filter</code>和<code>reduce</code>的去重效果是一样的，不过这种方法更简洁，逻辑更清晰。</p><p>其实还有更简便的方法：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr)); <span class="comment">//ES6</span></span><br><span class="line">[...new <span class="built_in">Set</span>(arr)];</span><br><span class="line"><span class="built_in">Array</span>.from(arr); <span class="comment">//注意: 此数组方法可将伪数组转真数组</span></span><br></pre></td></tr></table></figure><hr><p>参考文档：<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener">Array 方法</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JavaScript的 Array 对象是用于构造数组的全局对象，数组是类似于列表的高阶对象。本文将主要讲解 &lt;code&gt;Array.prototype&lt;/code&gt; 下的方法&lt;/p&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="https://me.chjiyun.com/categories/JavaScript/"/>
    
      <category term="Array" scheme="https://me.chjiyun.com/categories/JavaScript/Array/"/>
    
    
      <category term="Array方法" scheme="https://me.chjiyun.com/tags/Array%E6%96%B9%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>两步解决百度爬虫无法爬取git博客的问题</title>
    <link href="https://me.chjiyun.com/2017/09/08/%E4%B8%A4%E6%AD%A5%E8%A7%A3%E5%86%B3%E7%99%BE%E5%BA%A6%E7%88%AC%E8%99%AB%E6%97%A0%E6%B3%95%E7%88%AC%E5%8F%96git%E5%8D%9A%E5%AE%A2%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://me.chjiyun.com/2017/09/08/两步解决百度爬虫无法爬取git博客的问题/</id>
    <published>2017-09-08T07:23:57.000Z</published>
    <updated>2017-12-15T04:36:38.026Z</updated>
    
    <content type="html"><![CDATA[<p>逛知乎时偶然发现有网友在讨论“github 禁止了百度爬虫的抓取”的问题，于是用百度站长试着抓取一遍，果然抓取失败，403[Forbidden]。作为国内不能用google的用户来说，禁止了百度爬虫意味着访问量会急剧下降，就达不到技术分享交流的目的了。继续浏览知乎，发现他们都找到了解决方法：</p><ul><li>利用cdn缓存</li><li>更换托管网站</li><li>买个vps搭建博客镜像</li></ul><a id="more"></a><p>第一个方案太繁琐，第三个需要买vps，还不如买个服务器，何必折腾呢，我倒觉得第二个方案可行，于是博客转移到了<a href="https://coding.net" target="_blank" rel="noopener">coding</a>。但是由于最近深圳coding公司的服务器不稳定的因素，导致百度蜘蛛爬取超时，跟coding客服反映，他们也是各种理由。无奈，最后还是重归github。</p><p>那么还是那个问题，既然不想放弃 Github，唯一的办法就是不让百度爬虫直接抓取 Github 的内容，而是抓取网站的一个镜像。于是我想到了部署两个镜像的方案，一个部署在 github，一个部署在 coding，利用 DNS 解析，让百度蜘蛛只抓取 coding 的内容，从而绕开了 Github 对百度蜘蛛的限制。具体步骤如下：</p><ul><li>注册一个 coding 账号，新建一个仓库，Git上传时同时部署到github和coding，然后在 coding pages 服务中绑定你的域名，并部署到 master。(普通会员的 Coding Pages 在访问时默认会先加载 Pages 广告，所以要在你的博客首页底部放置 “Hosted by Coding Pages”，并且要在刚才绑定自定义域名的页面下方勾选已放置那个字段，审核通过后才能去广告)。</li><li>新建一个 DNS 解析记录，重定向到<code>pages.coding.me</code>，解析线路选择百度，如果你的coding绑定的是根域名，比如：<code>chjiyun.com</code>，则主机记录选择 @，如果是二级域名则填顶级域名前的字符（例：<code>me.chjiyun.com</code>，主机记录填me）。</li></ul><p><img src="https://i.loli.net/2017/09/08/59b25a0705aaa.png" alt="17_9_8_01.png"></p><p>注意：由于我的博客站点使用的是二级域，并非顶级域，而且<code>www.chjiyun.com</code>和<code>me.chjiyun.com</code>所属不同的仓库，但同属同一个 git 账户（chjiyun）。上图有一个小错误，第二个记录值应该填<code>chjiyun.github.io.</code>，也就是说指向github的记录值应该为这种格式<code>username.github.io.</code>（这是github官方要求的，他们发送邮件建议我更改CNAME记录），设置后 Github 服务器会根据仓库根目录下的CNAME文件301重定向到对应的域。</p><p><img src="https://i.loli.net/2017/09/08/59b25a07231f3.png" alt="17_9_8_02.png"></p><p>hexo 搭建的博客安装这个插件 hexo-deployer-git 就可以解决同时部署的问题，在这之前你必须得生成一对ssh密钥，然后把公钥放到 coding 上，再配置 config 文件，具体教程请参考我的另一篇文章：<a href="/2017/08/28/%E5%A4%9A%E4%B8%AA%E5%AF%86%E9%92%A5ssh-key%E7%9A%84%E7%94%9F%E6%88%90%E4%B8%8E%E7%AE%A1%E7%90%86/">多个密钥 ssh-key 的生成与管理</a></p><p>如果上面的问题你都已经解决了，那么恭喜你，您的博客自动提交更新应该没什么问题了，百度会自动爬取并收录的。</p><p>注意：利用百度主动提交链接的方式也可以很容易解决爬虫的问题：<br><a href="https://www.ouyangsong.com/2017/08/17/coding-page-daocloud-baidu-push/" target="_blank" rel="noopener">Daocloud和Coding持续构建Hexo</a><br><a href="http://hui-wang.info/2016/10/23/Hexo%E6%8F%92%E4%BB%B6%E4%B9%8B%E7%99%BE%E5%BA%A6%E4%B8%BB%E5%8A%A8%E6%8F%90%E4%BA%A4%E9%93%BE%E6%8E%A5/" target="_blank" rel="noopener">Hexo插件之百度主动提交链接</a></p><p>参考资料：<br><a href="http://jerryzou.com/posts/feasibility-of-allowing-baiduSpider-for-Github-Pages/?utm_source=tuicool" target="_blank" rel="noopener">解决 Github Pages 禁止百度爬虫的方法与可行性分析</a><br><a href="https://www.zhihu.com/question/30898326" target="_blank" rel="noopener">如何解决百度爬虫无法爬取搭建在Github上的个人博客的问题？</a></p><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;逛知乎时偶然发现有网友在讨论“github 禁止了百度爬虫的抓取”的问题，于是用百度站长试着抓取一遍，果然抓取失败，403[Forbidden]。作为国内不能用google的用户来说，禁止了百度爬虫意味着访问量会急剧下降，就达不到技术分享交流的目的了。继续浏览知乎，发现他们都找到了解决方法：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;利用cdn缓存&lt;/li&gt;&lt;li&gt;更换托管网站&lt;/li&gt;&lt;li&gt;买个vps搭建博客镜像&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="SEO" scheme="https://me.chjiyun.com/categories/SEO/"/>
    
    
      <category term="百度蜘蛛" scheme="https://me.chjiyun.com/tags/%E7%99%BE%E5%BA%A6%E8%9C%98%E8%9B%9B/"/>
    
      <category term="Github Pages" scheme="https://me.chjiyun.com/tags/Github-Pages/"/>
    
      <category term="SEO" scheme="https://me.chjiyun.com/tags/SEO/"/>
    
  </entry>
  
  <entry>
    <title>CSS实现水平垂直居中方法</title>
    <link href="https://me.chjiyun.com/2017/09/06/CSS%E5%AE%9E%E7%8E%B0%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD%E6%96%B9%E6%B3%95/"/>
    <id>https://me.chjiyun.com/2017/09/06/CSS实现水平垂直居中方法/</id>
    <published>2017-09-06T10:09:07.000Z</published>
    <updated>2017-12-09T07:33:20.432Z</updated>
    
    <content type="html"><![CDATA[<p>以前经常使用<code>text-align: center;</code>来实现文本居中，用<code>margin: 0 auto;</code>实现 div 水平居中，那么垂直居中呢？padding？这肯定是不可靠的。<br>其实<code>margin: auto</code>结合定位就可以实现水平垂直居中，你可能使用过，但是下面的几种方法不一定全部用过…</p><a id="more"></a><p>参考：如何居中任何一个元素<a href="http://designshack.net/articles/css/how-to-center-anything-with-css" target="_blank" rel="noopener">How to Center Anything WithCSS</a></p><p>绝对居中（AbsoluteCentering）的工作机制可以阐述如下：</p><blockquote><p>1、在普通内容流（normal content flow）中，margin:auto的效果等同于margin-top:0;margin-bottom:0。</p><p>2、position:absolute使绝对定位块跳出了内容流，内容流中的其余部分渲染时绝对定位部分不进行渲染。</p><p>3、为块区域设置top: 0; left: 0; bottom: 0; right: 0;将给浏览器重新分配一个边界框，此时该块block将填充其父元素的所有可用空间，父元素一般为body或者声明为position:relative;的容器。</p><p>4、 给内容块设置一个高度height或宽度width，能够防止内容块占据所有的可用空间，促使浏览器根据新的边界框重新计算margin:auto</p><p>5、由于内容块被绝对定位，脱离了正常的内容流，浏览器会给margin-top,margin-bottom相同的值，使元素块在先前定义的边界内居中。</p><p>这么看来， margin:auto似乎生来就是为绝对居中(Absolute Centering)设计的，所以绝对居中(Absolute Centering)应该都兼容符合标准的现代浏览器。</p><p>简而言之（TL;DR）：绝对定位元素不在普通内容流中渲染，因此margin:auto可以使内容在通过top: 0; left: 0; bottom: 0;right: 0;设置的边界内垂直居中。</p></blockquote><hr><h2 id="绝对定位"><a class="markdownIt-Anchor" href="#绝对定位"></a> 绝对定位</h2><p>这是我使用比较多的一种居中方法，兼容性不错，支持百分比。此方法也可以扩展成固定定位居中于整个文档，不是可视区域居中，例如登录框、提示框等模态框居中。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center-block"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>绝对定位居中<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父容器相对定位，容器内水平垂直居中<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>支持百分比宽高，可以控制宽高变化范围<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>利用这一方法可以做边栏效果，例如楼梯，回到顶部...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outer-container</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#549092</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">250px</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#46d5da</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da35350.png" alt="17_9_6_01.png"><br><img src="https://i.loli.net/2017/09/07/59b022626afc7.png" alt="17_9_6_08.png"></p><p>注意：最好是将样式应用在图片本身上，图片居中还可以运用单元格等其它方式实现</p><p>优点：</p><ol><li>能兼容到IE8</li><li>支持响应式和自适应</li><li>支持图片居中</li></ol><p>缺点：</p><ol><li>容器可能溢出，使用<code>overflow: auto;</code></li><li>宽高必须声明</li></ol><p>注意：下面的部分样式与上面的例子重复，故省略。</p><hr><h2 id="负外边距"><a class="markdownIt-Anchor" href="#负外边距"></a> 负外边距</h2><p>可能是最流行的居中方法，主要应用在内容块布局中，也是目前唯一能兼容到IE6的方法。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center-block"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">250px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da34b69.png" alt="17_9_6_02.png"></p><p>优点：</p><ol><li>兼容性很好，能兼容到IE6</li><li>较少的代码量</li></ol><p>缺点：</p><ol><li>宽高不可变，不支持百分比和min-/max-</li><li>容器可能溢出</li><li>负间距要考虑宽高和<code>box-sizing</code>属性</li></ol><hr><h2 id="translate"><a class="markdownIt-Anchor" href="#translate"></a> Translate</h2><p>最简单也是比较流行的居中方法，结合绝对定位，宽高可变。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center-block"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translate</span>(-50%,-50%);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%,-50%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da35bd0.png" alt="17_9_6_03.png"></p><p>优点：</p><ol><li>高度随内容撑开</li><li>代码量少</li></ol><p>缺点：</p><ol><li>IE8不支持</li><li>要写浏览器厂商前缀</li><li>会干扰其它transform效果</li><li>某些情况下会出现文本渲染模糊的现象</li></ol><p>更多transform实现居中的知识可以参考<a href="http://css-tricks.com/centering-percentage-widthheight-elements/" target="_blank" rel="noopener">Centering PercentageWidth/Height Elements</a></p><hr><h2 id="单元格table-cell"><a class="markdownIt-Anchor" href="#单元格table-cell"></a> 单元格(table-cell)</h2><p>如果不考虑语义的话，这可能是最好的居中方法，兼容性好，高度自适应，唯一的缺点是需要两层父元素让内容块居中。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"table-cell"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center-block"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outer-container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.table-cell</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: table-cell;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018d9ed56b.png" alt="17_9_6_04.png"></p><p>优点：</p><ol><li>高度随内容撑开</li><li>跨浏览器兼容性好</li></ol><p>缺点：</p><ol><li>需要额外的html元素</li></ol><p>更多用表格单元格实现居中的知识，请参考<a href="www.456bereastreet.com/archive/201103/flexible_height_vertical_centering_with_css_beyond_ie7/">Flexibleheight vertical centering with CSS, beyond IE7</a></p><hr><h2 id="inline-block"><a class="markdownIt-Anchor" href="#inline-block"></a> Inline-block</h2><p>一种非常聪明的居中方式，个人觉得比单元格的那种稍微要好一点，浏览器支持的也不错，只是要占用一个伪元素。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center-block"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outer-container</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.outer-container</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">margin-right</span>: -<span class="number">0.25em</span>; <span class="comment">/* Adjusts for spacing */</span></span><br><span class="line">    <span class="attribute">background</span>: salmon;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da08f4d.png" alt="17_9_6_05.png"><br><img src="https://i.loli.net/2017/09/06/59b018da16b5c.png" alt="17_9_6_07.png"></p><p>优点：</p><ol><li>高度随内容撑开</li><li>跨浏览器兼容性好，适用于IE7</li></ol><p>缺点：</p><ol><li>需要额外的html元素</li><li>依赖伪元素</li><li>内容块宽度不能超过容器的100% - 0.25em。</li></ol><p>相关知识请参考<a href="https://css-tricks.com/centering-in-the-unknown/" target="_blank" rel="noopener">Centeringin the Unknown</a></p><hr><h2 id="flexbox"><a class="markdownIt-Anchor" href="#flexbox"></a> Flexbox</h2><p>Flex是Flexible Box的缩写，意为”弹性布局”，flex是CSS3的新增属性，它的问世目的是解决传统布局难以实现的特殊情况，例如垂直居中。Flex布局将成为未来布局的首选方案。</p><blockquote><p>2009年，W3C提出了一种新的方案—-Flex布局，可以简便、完整、响应式地实现各种页面布局。目前，它已经得到了所有浏览器的支持，这意味着，现在就能很安全地使用这项功能。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"outer-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"center-block"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- content --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.outer-container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">-webkit-align-items</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">-webkit-justify-content</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center-block</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/09/06/59b018da1696c.png" alt="17_9_6_06.png"></p><p>优点：</p><ol><li>宽高不用定义，随内容撑开</li><li>未来的主流居中技术</li><li>可应用于更复杂的布局技术中</li></ol><p>缺点：</p><ol><li>IE9及以下不支持</li><li>需要添加浏览器厂商前缀</li></ol><p>注意：应用flex布局后，其float、clear和vertical-align属性将失效。</p><p>更多flex布局方法，请参考:<br><a href="https://scotch.io/tutorials/a-visual-guide-to-css3-flexbox-properties" target="_blank" rel="noopener">A Visual Guide to CSS3 Flexbox Properties</a><br><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="noopener">Flex布局教程-阮一峰</a></p><hr><h2 id="建议"><a class="markdownIt-Anchor" href="#建议"></a> 建议：</h2><ul><li>每种技术都有它的优势与劣势，要基于你的浏览器的支持情况，参照上面的分析，选择最合适的方法。</li><li>如果不用考虑IE低版本的话，可以放心地使用Flexbox居中技术，它能优雅地实现复杂的布局情况，新属性记得一定要写浏览器前缀。</li><li>在移动端浏览器上应用上面的方法可能会出现一些问题，不过问题不大，实在不行就一个个的试。</li></ul><hr><p>如果有错误，欢迎指正，或者如果你有更多实现居中的方式，欢迎email。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;以前经常使用&lt;code&gt;text-align: center;&lt;/code&gt;来实现文本居中，用&lt;code&gt;margin: 0 auto;&lt;/code&gt;实现 div 水平居中，那么垂直居中呢？padding？这肯定是不可靠的。&lt;br&gt;其实&lt;code&gt;margin: auto&lt;/code&gt;结合定位就可以实现水平垂直居中，你可能使用过，但是下面的几种方法不一定全部用过…&lt;/p&gt;
    
    </summary>
    
      <category term="CSS" scheme="https://me.chjiyun.com/categories/CSS/"/>
    
    
      <category term="CSS" scheme="https://me.chjiyun.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>行块级元素的那些事儿</title>
    <link href="https://me.chjiyun.com/2017/09/03/%E8%A1%8C%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/"/>
    <id>https://me.chjiyun.com/2017/09/03/行块级元素的那些事儿/</id>
    <published>2017-09-03T13:30:13.000Z</published>
    <updated>2017-12-12T10:44:37.034Z</updated>
    
    <content type="html"><![CDATA[<p>在写项目的时候，我们难免会把一个元素声明为<code>display: inline-block</code>，inline-block 元素既具有 block 元素可以定义宽高的特性，同时又具有 inline 元素默认不换行的特性。它也可以设置 vertical-align（这个属性只对设置了inline-block的元素有效）属性,如果这时候加上<code>overflow: hidden</code>，这可能会引发一个对齐问题，这正是本文要探讨的主要问题。</p><a id="more"></a><p>注意：HTML 中的换行符、空格符、制表符等合并为空白符，字体大小不为 0 的情况下，空白符占据一定的宽度，这时 inline-block 元素之间会产生空隙。</p><h2 id="发现问题"><a class="markdownIt-Anchor" href="#发现问题"></a> 发现问题</h2><p>其实之前做项目就发现多个内联元素同行显示时就有间隙的问题，不同浏览器间距大小还不同，不过这有很多方法解决，这里就不一一赘述了。</p><p>今天在修改按钮样式时就发现一个异常问题，一时间不知道是什么原因引起的，情况如下：按钮是用 a 标签写的，由于要写css hover效果，给 a 加了<code>overflow: hidden</code>后发现 a 的父容器下方被撑开了若干像素。</p><p><img src="https://i.loli.net/2017/09/03/59ac02cad84c1.png" alt="17_9_3_01.png"></p><p>按钮样式为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#555</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">vertical-align</span>: bottom;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="解决问题"><a class="markdownIt-Anchor" href="#解决问题"></a> 解决问题</h2><p>常用的解决方法有两种：</p><ol><li>给父容器加<code>font-size: 0</code>；</li><li>给上述 inline-block 元素加<code>vertical-align: bottom</code> (相对于父标签的底部对齐)；</li></ol><p><img src="https://i.loli.net/2017/09/03/59ac02caead72.png" alt="17_9_3_02.png"></p><h2 id="why"><a class="markdownIt-Anchor" href="#why"></a> WHY？</h2><p>W3C的规范对此行为有明确规定：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The baseline of an &apos;inline-block&apos; is the baseline of its last line box in the normal flow, </span><br><span class="line">unless it has either no in-flow line boxes or if its &apos;overflow&apos; property has a computed value other than &apos;visible&apos;, </span><br><span class="line">in which case the baseline is the bottom margin edge.</span><br></pre></td></tr></table></figure><p>我们从规范中可以知道当一个 inline-block 元素被设置 overflow 非 visible 属性值后，其 baseline 将被强制修改为元素下外边沿。</p><p>我们知道默认情况下，baseline为字符的底线位置且 vertical-align 属性值为 baseline。</p><p>为什么W3C要做如此奇怪的规定呢？</p><p>这是因为 overflow 被设置为非 visible 值，将使得该 inline-block 元素中的 last line box 的渲染处于不确定状态（浏览器可能渲染也可能不渲染），这让保持默认规则的 baseline 也处于不确定状态，那么索性就规定以确定的下外边沿来作为 baseline。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;baseline&quot; -</span><br><span class="line">Align the baseline of the box with the baseline of the parent box.</span><br><span class="line">If the box does not have a baseline, align the bottom margin edge with the parent&apos;s baseline.</span><br></pre></td></tr></table></figure><blockquote><p>参考vertical-align的更多用法：<a href="http://www.zhangxinxu.com/wordpress/2010/05/%E6%88%91%E5%AF%B9css-vertical-align%E7%9A%84%E4%B8%80%E4%BA%9B%E7%90%86%E8%A7%A3%E4%B8%8E%E8%AE%A4%E8%AF%86%EF%BC%88%E4%B8%80%EF%BC%89/" target="_blank" rel="noopener">这里</a></p></blockquote><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在写项目的时候，我们难免会把一个元素声明为&lt;code&gt;display: inline-block&lt;/code&gt;，inline-block 元素既具有 block 元素可以定义宽高的特性，同时又具有 inline 元素默认不换行的特性。它也可以设置 vertical-align（这个属性只对设置了inline-block的元素有效）属性,如果这时候加上&lt;code&gt;overflow: hidden&lt;/code&gt;，这可能会引发一个对齐问题，这正是本文要探讨的主要问题。&lt;/p&gt;
    
    </summary>
    
      <category term="CSS" scheme="https://me.chjiyun.com/categories/CSS/"/>
    
    
      <category term="CSS" scheme="https://me.chjiyun.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>免费的cdn静态资源加速服务</title>
    <link href="https://me.chjiyun.com/2017/08/31/%E5%85%8D%E8%B4%B9%E7%9A%84cdn%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%8A%A0%E9%80%9F%E6%9C%8D%E5%8A%A1/"/>
    <id>https://me.chjiyun.com/2017/08/31/免费的cdn静态资源加速服务/</id>
    <published>2017-08-31T12:31:09.000Z</published>
    <updated>2017-09-12T09:09:18.041Z</updated>
    
    <content type="html"><![CDATA[<h2 id="什么是cdn"><a class="markdownIt-Anchor" href="#什么是cdn"></a> 什么是CDN？</h2><blockquote><p>cdn的全称:Content Delivery Network或Content Ddistribute Network，即内容分发网络</p><p>目的是解决因分布、带宽、服务器性能带来的访问延迟问题，适用于站点加速、点播、直播等场景。使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度和成功率。控制时延无疑是现代信息科技的重要指标，CDN的意图就是尽可能的减少资源在转发、传输、链路抖动等情况下顺利保障信息的连贯性。CDN就是扮演者护航者和加速者的角色，更快准狠的触发信息和触达每一个用户，带来更为极致的使用体验。</p></blockquote><a id="more"></a><p>参考：<a href="https://baike.baidu.com/item/CDN/420951?fr=aladdin" target="_blank" rel="noopener">百度百科</a></p><hr><h2 id="为什么用cdn"><a class="markdownIt-Anchor" href="#为什么用cdn"></a> 为什么用CDN</h2><p>今天在上 blog 时，发现网页加载奇慢，打开控制台发现是谷歌的字体库出现请求超时，然后 ping了一下字体库的服务器，也是出现请求超时。于是萌生了转向 国内免费cdn加速服务的想法，百度上也有很多，但都不是我的理想选择，然后在一个论坛上看到一个奇葩域名：<a href="https://sb.sb/css-cdn" target="_blank" rel="noopener">sb.sb</a>，点进去是一个提供国内加速服务的网站，托管了 <code>CDNJS</code> 的所有开源 JS 库以及反向代理了 <code>Google Fonts</code>、<code>Ajax</code> 和 <code>Gravatar</code>，这一点很令人激动，即解决了字体库的问题，顺手还可以解决因服务器波动而带来的脚本加载超时的问题，一举两得。</p><p>ping测试 <a href="http://fonts.cat.net" target="_blank" rel="noopener">fonts.cat.net</a> 的传输速度:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">正在 Ping all.cat.net.w.kunlunpi.com [123.6.7.31] 具有 32 字节的数据:</span><br><span class="line">来自 123.6.7.31 的回复: 字节=32 时间=19ms TTL=45</span><br><span class="line">来自 123.6.7.31 的回复: 字节=32 时间=20ms TTL=45</span><br><span class="line">来自 123.6.7.31 的回复: 字节=32 时间=21ms TTL=45</span><br><span class="line">来自 123.6.7.31 的回复: 字节=32 时间=19ms TTL=45</span><br><span class="line"></span><br><span class="line">123.6.7.31 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 19ms，最长 = 21ms，平均 = 19ms</span><br></pre></td></tr></table></figure><p>来对比下国内bootCDN的开源项目加速服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">正在 Ping nm.cun.aicdn.com [211.91.140.66] 具有 32 字节的数据:</span><br><span class="line">来自 211.91.140.66 的回复: 字节=32 时间=37ms TTL=52</span><br><span class="line">来自 211.91.140.66 的回复: 字节=32 时间=37ms TTL=52</span><br><span class="line">来自 211.91.140.66 的回复: 字节=32 时间=35ms TTL=52</span><br><span class="line">来自 211.91.140.66 的回复: 字节=32 时间=37ms TTL=52</span><br><span class="line"></span><br><span class="line">211.91.140.66 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 35ms，最长 = 37ms，平均 = 36ms</span><br></pre></td></tr></table></figure><p>hexo默认的jsdelivr.net的加速服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">正在 Ping 1stcnsniwebmw.dtwscache.ourwebcdn.com [218.29.50.51] 具有 32 字节的数据:</span><br><span class="line">来自 218.29.50.51 的回复: 字节=32 时间=25ms TTL=55</span><br><span class="line">来自 218.29.50.51 的回复: 字节=32 时间=26ms TTL=55</span><br><span class="line">来自 218.29.50.51 的回复: 字节=32 时间=24ms TTL=55</span><br><span class="line">来自 218.29.50.51 的回复: 字节=32 时间=26ms TTL=55</span><br><span class="line"></span><br><span class="line">218.29.50.51 的 Ping 统计信息:</span><br><span class="line">    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，</span><br><span class="line">往返行程的估计时间(以毫秒为单位):</span><br><span class="line">    最短 = 24ms，最长 = 26ms，平均 = 25ms</span><br></pre></td></tr></table></figure><p>看往返时间损耗很明显是 <a href="http://cat.net" target="_blank" rel="noopener">cat.net</a> 更胜一筹，于是果断都换了链接，加载速度虽然相差不大，但至少可以实现全球加速，解决了一个隐患。</p><hr><h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><p>经过一段时间的使用我还是推荐使用 <a href="http://cat.net" target="_blank" rel="noopener">cat.net</a> 的加速服务，因为趁现在使用人数还不多，可以免受网络拥堵带来的漫长等待，关键是人家拥有庞大的静态资源库而且还免费全球加速，当然你也可以使用其他站点提供的加速服务，例如bootCDN，百度，jsdelivr等等，最好是使用https链接，免受资源被劫持后插入危险代码的风险。</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;什么是cdn&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#什么是cdn&quot;&gt;&lt;/a&gt; 什么是CDN？&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;cdn的全称:Content Delivery Network或Content Ddistribute Network，即内容分发网络&lt;/p&gt;&lt;p&gt;目的是解决因分布、带宽、服务器性能带来的访问延迟问题，适用于站点加速、点播、直播等场景。使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度和成功率。控制时延无疑是现代信息科技的重要指标，CDN的意图就是尽可能的减少资源在转发、传输、链路抖动等情况下顺利保障信息的连贯性。CDN就是扮演者护航者和加速者的角色，更快准狠的触发信息和触达每一个用户，带来更为极致的使用体验。&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="CDN" scheme="https://me.chjiyun.com/categories/CDN/"/>
    
    
      <category term="CDN" scheme="https://me.chjiyun.com/tags/CDN/"/>
    
  </entry>
  
  <entry>
    <title>多个密钥ssh-key的生成与管理</title>
    <link href="https://me.chjiyun.com/2017/08/28/%E5%A4%9A%E4%B8%AA%E5%AF%86%E9%92%A5ssh-key%E7%9A%84%E7%94%9F%E6%88%90%E4%B8%8E%E7%AE%A1%E7%90%86/"/>
    <id>https://me.chjiyun.com/2017/08/28/多个密钥ssh-key的生成与管理/</id>
    <published>2017-08-28T11:22:57.000Z</published>
    <updated>2018-04-03T13:41:20.113Z</updated>
    
    <content type="html"><![CDATA[<p>由于 Git 大文件以 https 协议传输较慢，而且每次还要输入用户名和密码，很是麻烦，而使用 ssh 协议传输的话，上面的问题都不会出现。如果你只有一个 Git 账号，建立 ssh 连接就很简单了，但是因为某些原因需要申请多个账号，比如公司和家里的电脑都需要使用 Git 服务，而 Github 官方网站规定了一对 ssh-key 只对应一个账号，一个账号可以存放多个公钥。你在一台电脑上要使用多个账号的话，必须要管理你的密钥，也就是指定使用哪个密钥。</p><a id="more"></a><p>最近在提交项目到 git 和 coding 时折腾了一天，现将我的解决思路总结如下：</p><h2 id="生成密钥"><a class="markdownIt-Anchor" href="#生成密钥"></a> 生成密钥</h2><p>在命令行中，键入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"your_email"</span></span><br></pre></td></tr></table></figure><p>会生成一对密钥，默认情况下，私钥将放在 ~/.ssh/id_rsa，对应的公钥则为 ~/.ssh/id_rsa.pub。</p><p>生成的过程中，会询问你存放密钥的位置。第一次生成密钥时直接回车就行，则密钥放在 ~/.ssh/ 下，由于每个人可能不止需要一个密钥，所以可以另存为其他名字的密钥，比如 path/to/your/dir/coding_rsa，此时会生成对应的一对密钥。</p><p>可以使用以下代码来查看生成的公钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/coding_rsa.pub</span><br></pre></td></tr></table></figure><p>也可以用记事本或文本编辑器打开查看，然后将公钥复制到你需要的服务器上（比如 github，gitlab，coding 等等）</p><h2 id="密钥管理"><a class="markdownIt-Anchor" href="#密钥管理"></a> 密钥管理</h2><p>如前文所述，如果我们需要多个密钥，那么在使用中，如何确定实际使用哪一个呢？</p><p>目前为止，ssh-key 用得最多的两个地方，一是 git 相关服务，二是远程连接服务器。</p><p>命令行输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh -i path/to/your/key developer@192.168.1.237 -p 23</span><br><span class="line">scp -i path/to/your/key filename developer@192.168.1.237:/diskpath</span><br></pre></td></tr></table></figure><p>用 -i 指定私钥，-p 指定端口，连接服务器</p><p>由于每个 git 账户都绑定了不同的公钥，每次提交时会发送本地私钥（默认~/.ssh/id_rsa）到服务端验证，多用户的话，这个验证自然无法通过。所以要通过 ~/.ssh/config 文件来控制。如果没有就在 ~/.ssh 目录下创建 config 文件，该文件用于配置密钥对应的服务器。比如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># Default github user(first@mail.com)</span><br><span class="line"></span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">User git</span><br><span class="line">IdentityFile C:/Users/username/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line"># test (second@mail.com)</span><br><span class="line"></span><br><span class="line">Host github-second  # 别名</span><br><span class="line">HostName github.com</span><br><span class="line">User git</span><br><span class="line">IdentityFile C:/Users/username/.ssh/test</span><br><span class="line"></span><br><span class="line"># coding.net user (third@mail.com)</span><br><span class="line"></span><br><span class="line">Host git.coding.net</span><br><span class="line">User third@email.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile C:/Users/username/.ssh/coding_rsa</span><br></pre></td></tr></table></figure><p>Host可以随意填写，但是我不建议这样做，假如有这样一个仓库地址：<code>git@github.com:username/xxx.git</code>，则HostName为<code>github.com</code>或该域名所指向的IP，并且Host最好填写<code>github.com</code>，为什么呢？因为当你在其它电脑上克隆仓库时，我们通常直接 copy 仓库地址，这时如果你的 Host 不是<code>github.com</code>而是随意填写的，克隆就会出错，只有把仓库地址里的<code>github.com</code>改为你填写的名称才能克隆成功，大家不相信的可以一试，另外需要注意的是如果你的项目所在网站地址栏出现端口号，而 copy 的仓库地址里却没有，这时以仓库地址为准，千万不要手欠给<code>remote repository</code>加上端口号，否则会出现<code>Repo Not Found</code>的情况。然后username 为你计算机的用户名，User后填写你的注册邮箱。</p><p>上述配置完成后，那么恭喜你可以进行日常的代码克隆拉取推送等操作了。</p><h2 id="测试ssh"><a class="markdownIt-Anchor" href="#测试ssh"></a> 测试ssh</h2><p>远程操作前也可以进行密钥的连通性测试：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>前段时间遇到一个诡异的问题：github突然连接不上，代码无法推送</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connect to host github.com port 22: Connection timed out #一开始出现这个错误</span><br><span class="line">ssh_exchange_identification: Connection closed by remote host #三次后出现这个</span><br></pre></td></tr></table></figure><p>捣鼓了二个多小时，终于爬出了这个坑，方法如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">HostName ssh.github.com</span><br><span class="line">User youremail@xx.com  #填上你自己的邮箱</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile C:/Users/username/.ssh/id_rsa #username自己查看</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure><p>输入下列命令查看连接的详细信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -vT git@github.com</span><br></pre></td></tr></table></figure><p>出现如下提示，表示这个ssh公钥已经通过了认证</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi USERNAME! You<span class="string">'ve successfully authenticated, but github does not provide shell access.</span></span><br></pre></td></tr></table></figure><p>测试 coding 的ssh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@git.coding.net</span><br></pre></td></tr></table></figure><p>出现如下提示，表示提示连接成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Coding.net Tips : [Hello USERNAME, You<span class="string">'ve connected to Coding.net via SSH successfully!]</span></span><br></pre></td></tr></table></figure><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;由于 Git 大文件以 https 协议传输较慢，而且每次还要输入用户名和密码，很是麻烦，而使用 ssh 协议传输的话，上面的问题都不会出现。如果你只有一个 Git 账号，建立 ssh 连接就很简单了，但是因为某些原因需要申请多个账号，比如公司和家里的电脑都需要使用 Git 服务，而 Github 官方网站规定了一对 ssh-key 只对应一个账号，一个账号可以存放多个公钥。你在一台电脑上要使用多个账号的话，必须要管理你的密钥，也就是指定使用哪个密钥。&lt;/p&gt;
    
    </summary>
    
      <category term="教程" scheme="https://me.chjiyun.com/categories/%E6%95%99%E7%A8%8B/"/>
    
      <category term="ssh" scheme="https://me.chjiyun.com/categories/%E6%95%99%E7%A8%8B/ssh/"/>
    
    
      <category term="ssh-key" scheme="https://me.chjiyun.com/tags/ssh-key/"/>
    
      <category term="github" scheme="https://me.chjiyun.com/tags/github/"/>
    
  </entry>
  
  <entry>
    <title>如何下载微博上的视频</title>
    <link href="https://me.chjiyun.com/2017/08/28/%E5%A6%82%E4%BD%95%E4%B8%8B%E8%BD%BD%E5%BE%AE%E5%8D%9A%E4%B8%8A%E7%9A%84%E8%A7%86%E9%A2%91/"/>
    <id>https://me.chjiyun.com/2017/08/28/如何下载微博上的视频/</id>
    <published>2017-08-27T16:46:12.000Z</published>
    <updated>2017-08-31T10:30:56.514Z</updated>
    
    <content type="html"><![CDATA[<h2 id="pc端下载方法"><a class="markdownIt-Anchor" href="#pc端下载方法"></a> PC端下载方法</h2><h3 id="获取视频链接"><a class="markdownIt-Anchor" href="#获取视频链接"></a> 获取视频链接</h3><p>打开<a href="https://weibo.com" target="_blank" rel="noopener">微博</a>，登陆自己的账号，找到喜欢的视频，点击高亮链接即可打开新窗口播放，地址栏就是这个视频的源地址。</p><a id="more"></a><h3 id="打开这个网站"><a class="markdownIt-Anchor" href="#打开这个网站"></a> 打开这个网站</h3><p>浏览器打开新标签页，地址栏输入<a href="http://www.weibovideo.com/" target="_blank" rel="noopener">weibovideo.com</a></p><h3 id="生成下载链接"><a class="markdownIt-Anchor" href="#生成下载链接"></a> 生成下载链接</h3><p><img src="https://i.loli.net/2017/08/31/59a7e21cd8670.png" alt="weibovideo.png" title="weibovideo操作界面"></p><p>复制第一步的视频地址到第一个输入框，单击右边的按钮<code>解析视频</code>，下方的下载地址会自动生成。<br>chrome下可以直接点击下载地址会打开新窗口播放，这时候就可以下载到本地了。</p><blockquote><p>注意: 此方法支持的视频来源：微博视频、微录客、小咖秀、秒拍、bilibili。</p></blockquote><hr><h2 id="手机浏览器下载方法"><a class="markdownIt-Anchor" href="#手机浏览器下载方法"></a> 手机浏览器下载方法</h2><p>这种方法简单粗暴，适合有手机的用户。</p><ul><li>打开微博手机端，找一个喜欢的视频</li><li>分享到qq浏览器查看（或者分享到微信，微信内置qq浏览器，可下载到本地）</li><li>打开设置点击下载视频即可</li></ul><hr>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;pc端下载方法&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#pc端下载方法&quot;&gt;&lt;/a&gt; PC端下载方法&lt;/h2&gt;&lt;h3 id=&quot;获取视频链接&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#获取视频链接&quot;&gt;&lt;/a&gt; 获取视频链接&lt;/h3&gt;&lt;p&gt;打开&lt;a href=&quot;https://weibo.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;微博&lt;/a&gt;，登陆自己的账号，找到喜欢的视频，点击高亮链接即可打开新窗口播放，地址栏就是这个视频的源地址。&lt;/p&gt;
    
    </summary>
    
      <category term="教程" scheme="https://me.chjiyun.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="微博" scheme="https://me.chjiyun.com/tags/%E5%BE%AE%E5%8D%9A/"/>
    
      <category term="视频" scheme="https://me.chjiyun.com/tags/%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>Test Online Multimedia</title>
    <link href="https://me.chjiyun.com/2017/08/27/Test-online-multimedia/"/>
    <id>https://me.chjiyun.com/2017/08/27/Test-online-multimedia/</id>
    <published>2017-08-26T16:02:30.000Z</published>
    <updated>2017-12-09T07:42:56.458Z</updated>
    
    <content type="html"><![CDATA[<h2 id="features"><a class="markdownIt-Anchor" href="#features"></a> Features</h2><ul><li>Support videos website:<ul><li>Youtube</li><li>Niconico</li><li>Bilibili</li><li>Vimeo</li><li>Tudou</li><li>Youku</li><li>Tencent</li><li>TED</li></ul></li></ul><a id="more"></a><link rel="stylesheet" type="text/css" href="/css/owl.css?v=5.1.2"><div style="font-weight:600;color:salmon">有些浏览器可能会禁止跨域访问其它站点视频信息，例如chrome，不用担心，这些站点是安全的，解除禁用就行了，同时还要保证flash插件是可用的，然后你就可以畅快的看在线视频了。为了测试是否可行，暂时只添加了Tencent、bilibili和youku。测试发现加载稍微有些慢，毕竟是当作插件来使用的，以后会尝试HTML5的video标签，引用静态加速资源，理论上加载会快一些。</div><h2 id="installation"><a class="markdownIt-Anchor" href="#installation"></a> Installation</h2><p>要想实现这个功能，需安装<code>hexo-tag-owl</code>，此插件支持html5新标签播放在线视频。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-owl --save</span><br></pre></td></tr></table></figure><h2 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h2><blockquote><p>Because the components are lack of CSS, everyone can add some CSS for one’s preference. Here provide a default CSS written in stylus at lib/asset/css.styl.</p></blockquote><p>配置 <em>_config.yml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">owl:</span></span><br><span class="line"><span class="attr">  css:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">  file:</span> <span class="string">css/owl.css</span></span><br></pre></td></tr></table></figure><ul><li>Options:</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% owl youtube YtuAOT_c2EA %&#125;</span><br><span class="line">&#123;% owl niconico sm1494658 %&#125;</span><br><span class="line">&#123;% owl niconico sm1494658 watch %&#125;</span><br><span class="line">&#123;% owl bilibili av247371 %&#125;</span><br><span class="line">&#123;% owl bilibili 247371 %&#125;</span><br><span class="line">&#123;% owl bilibili av367901 2 %&#125;</span><br><span class="line">&#123;% owl vimeo 5566538 %&#125;</span><br><span class="line">&#123;% owl tudou pRsx83aRLLs %&#125;</span><br><span class="line">&#123;% owl youku id_XMTc3MzcxMjQw %&#125;</span><br><span class="line">&#123;% owl tencent o03134mlm8j %&#125;</span><br><span class="line">&#123;% owl ted gero_miesenboeck zh-cn %&#125;</span><br></pre></td></tr></table></figure><p>参考：<a href="https://github.com/m80126colin/hexo-tag-owl" target="_blank" rel="noopener">更多使用说明</a></p><hr><h2 id="网易云音乐"><a class="markdownIt-Anchor" href="#网易云音乐"></a> 网易云音乐</h2><p><embed src="//music.163.com/style/swf/widget.swf?sid=410654865&type=2&auto=0&width=320&height=66" width="340" height="86" allownetworking="all"></p><hr><h2 id="腾讯视频"><a class="markdownIt-Anchor" href="#腾讯视频"></a> 腾讯视频</h2><blockquote><p>mv中的Sylwia Grzeszczak是波兰创作歌手和钢琴家，1989年4月7日出生在波兹南，她的风格基本上继承了波兰大多数女歌手特有的成熟阴冷的唱法.</p></blockquote><div class="owl-media owl-video owl-tencent"><embed src="http://static.video.qq.com/TPout.swf?vid=a0516hxea7b&auto=0" type="application/x-shockwave-flash" quality="high" allowfullscreen align="middle" allowscriptaccess="always"></div><hr><h2 id="bilibili"><a class="markdownIt-Anchor" href="#bilibili"></a> bilibili</h2><ul><li>前方高能</li></ul><div class="owl-media owl-video owl-bilibili"><embed src="http://static.hdslb.com/miniloader.swf" flashvars="aid=10701890&page=1" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" quality="high" allowfullscreen></div><hr><h2 id="youku"><a class="markdownIt-Anchor" href="#youku"></a> youku</h2><ul><li>世界上最大的石油污染</li></ul><p>若出现<span style="color:salmon">错误</span>可去 <a href="http://player.youku.com/embed/XMjk3OTg4MjY4OA" target="_blank" rel="noopener">这里观看</a>。</p><div class="owl-media owl-video owl-youku"><iframe src="http://player.youku.com/embed/XMjk3OTg4MjY4OA" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen></iframe></div><p>之前一段时间发现<code>tag-owl</code>这个插件解析优酷时总是出错，经过分析是被解析成了<code>Object</code>标签，而这是适用于 windows 平台的 ie 浏览器，火狐和 safari 是不支持的。为什么不是<code>embed</code>标签？于是我想到了问题可能出现在解析这一块，然后找到这个插件的安装包，里面有几个js文件，是模块化调用的，很不错，找到 ~/youku.js ，发现果然是解析有问题，下面代码return块原来是iframe，经过修改后，解析正确，完美。这可能是这个插件开发者犯得一个小错误吧，希望他能及时更正，推送新版本。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(<span class="string">'./config'</span>);</span><br><span class="line"><span class="comment">// youku</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">hexo, args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> id = args[<span class="number">0</span>].match(<span class="regexp">/^(id_|)(.+)$/</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'&lt;div class="owl-media owl-video owl-youku"&gt;&lt;embed src="http://player.youku.com/player.php/sid/'</span> + id[<span class="number">2</span>]  + <span class="string">'==/v.swf" '</span> + config.embed + <span class="string">'align="middle" allowScriptAccess="always"&gt;&lt;/embed&gt;&lt;/div&gt;'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>经测试embed标签能兼容大多数现代浏览器，能播放大多数多媒体文件，但是旧版ie(9-)只支持Object，只有高版本ie才支持embed，估计现在没多少人留恋ie了吧，也该被抛弃了。</p><p>关于embed标签的使用，请参考<a href="http://www.cnblogs.com/xiyangbaixue/p/4195278.html" target="_blank" rel="noopener">这里</a></p><hr>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;features&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#features&quot;&gt;&lt;/a&gt; Features&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;Support videos website:&lt;ul&gt;&lt;li&gt;Youtube&lt;/li&gt;&lt;li&gt;Niconico&lt;/li&gt;&lt;li&gt;Bilibili&lt;/li&gt;&lt;li&gt;Vimeo&lt;/li&gt;&lt;li&gt;Tudou&lt;/li&gt;&lt;li&gt;Youku&lt;/li&gt;&lt;li&gt;Tencent&lt;/li&gt;&lt;li&gt;TED&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="HTML5" scheme="https://me.chjiyun.com/categories/HTML5/"/>
    
    
      <category term="embed" scheme="https://me.chjiyun.com/tags/embed/"/>
    
  </entry>
  
</feed>
